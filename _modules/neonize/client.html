<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>neonize.client - neonize 1.2.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">neonize 1.2.3 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">neonize 1.2.3 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  
</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <h1>Source code for neonize.client</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">ctypes</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">struct</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">types</span><span class="w"> </span><span class="kn">import</span> <span class="n">NoneType</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">typing</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">timedelta</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">io</span><span class="w"> </span><span class="kn">import</span> <span class="n">BytesIO</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">,</span> <span class="n">overload</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">magic</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">PIL</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.protobuf.internal.containers</span><span class="w"> </span><span class="kn">import</span> <span class="n">RepeatedCompositeFieldContainer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">linkpreview</span><span class="w"> </span><span class="kn">import</span> <span class="n">link_preview</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">threading</span><span class="w"> </span><span class="kn">import</span> <span class="n">Thread</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">.utils.calc</span><span class="w"> </span><span class="kn">import</span> <span class="n">AspectRatioMethod</span><span class="p">,</span> <span class="n">auto_sticker</span>


<span class="kn">from</span><span class="w"> </span><span class="nn">._binder</span><span class="w"> </span><span class="kn">import</span> <span class="n">gocode</span><span class="p">,</span> <span class="n">func_string</span><span class="p">,</span> <span class="n">func_callback_bytes</span><span class="p">,</span> <span class="n">func</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.builder</span><span class="w"> </span><span class="kn">import</span> <span class="n">build_edit</span><span class="p">,</span> <span class="n">build_revoke</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.events</span><span class="w"> </span><span class="kn">import</span> <span class="n">Event</span><span class="p">,</span> <span class="n">EventsManager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.exc</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">ContactStoreError</span><span class="p">,</span>
    <span class="n">DownloadError</span><span class="p">,</span>
    <span class="n">GetChatSettingsError</span><span class="p">,</span>
    <span class="n">PutArchivedError</span><span class="p">,</span>
    <span class="n">PutMutedUntilError</span><span class="p">,</span>
    <span class="n">PutPinnedError</span><span class="p">,</span>
    <span class="n">ResolveContactQRLinkError</span><span class="p">,</span>
    <span class="n">SendAppStateError</span><span class="p">,</span>
    <span class="n">SendPresenceError</span><span class="p">,</span>
    <span class="n">SetDefaultDisappearingTimerError</span><span class="p">,</span>
    <span class="n">SetDisappearingTimerError</span><span class="p">,</span>
    <span class="n">SetGroupAnnounceError</span><span class="p">,</span>
    <span class="n">SetGroupLockedError</span><span class="p">,</span>
    <span class="n">SetGroupTopicError</span><span class="p">,</span>
    <span class="n">SetPassiveError</span><span class="p">,</span>
    <span class="n">SetPrivacySettingError</span><span class="p">,</span>
    <span class="n">SetStatusMessageError</span><span class="p">,</span>
    <span class="n">SubscribePresenceError</span><span class="p">,</span>
    <span class="n">UnfollowNewsletterError</span><span class="p">,</span>
    <span class="n">UnlinkGroupError</span><span class="p">,</span>
    <span class="n">UpdateBlocklistError</span><span class="p">,</span>
    <span class="n">UpdateGroupParticipantsError</span><span class="p">,</span>
    <span class="n">UploadError</span><span class="p">,</span>
    <span class="n">InviteLinkError</span><span class="p">,</span>
    <span class="n">GetGroupInfoError</span><span class="p">,</span>
    <span class="n">SetGroupPhotoError</span><span class="p">,</span>
    <span class="n">GetGroupInviteLinkError</span><span class="p">,</span>
    <span class="n">CreateGroupError</span><span class="p">,</span>
    <span class="n">IsOnWhatsAppError</span><span class="p">,</span>
    <span class="n">GetUserInfoError</span><span class="p">,</span>
    <span class="n">SendMessageError</span><span class="p">,</span>
    <span class="n">BuildPollVoteError</span><span class="p">,</span>
    <span class="n">CreateNewsletterError</span><span class="p">,</span>
    <span class="n">FollowNewsletterError</span><span class="p">,</span>
    <span class="n">GetBlocklistError</span><span class="p">,</span>
    <span class="n">GetProfilePictureError</span><span class="p">,</span>
    <span class="n">GetStatusPrivacyError</span><span class="p">,</span>
    <span class="n">GetSubGroupsError</span><span class="p">,</span>
    <span class="n">GetSubscribedNewslettersError</span><span class="p">,</span>
    <span class="n">LogoutError</span><span class="p">,</span>
    <span class="n">MarkReadError</span><span class="p">,</span>
    <span class="n">NewsletterMarkViewedError</span><span class="p">,</span>
    <span class="n">NewsletterSendReactionError</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.exc</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">GetContactQrLinkError</span><span class="p">,</span>
    <span class="n">GetGroupRequestParticipantsError</span><span class="p">,</span>
    <span class="n">GetJoinedGroupsError</span><span class="p">,</span>
    <span class="n">GetLinkedGroupParticipantsError</span><span class="p">,</span>
    <span class="n">GetNewsletterInfoError</span><span class="p">,</span>
    <span class="n">GetNewsletterInfoWithInviteError</span><span class="p">,</span>
    <span class="n">GetNewsletterMessageUpdateError</span><span class="p">,</span>
    <span class="n">GetNewsletterMessagesError</span><span class="p">,</span>
    <span class="n">GetUserDevicesError</span><span class="p">,</span>
    <span class="n">JoinGroupWithInviteError</span><span class="p">,</span>
    <span class="n">LinkGroupError</span><span class="p">,</span>
    <span class="n">NewsletterSubscribeLiveUpdatesError</span><span class="p">,</span>
    <span class="n">NewsletterToggleMuteError</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.proto</span><span class="w"> </span><span class="kn">import</span> <span class="n">Neonize_pb2</span> <span class="k">as</span> <span class="n">neonize_proto</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.proto.Neonize_pb2</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Contact</span><span class="p">,</span>
    <span class="n">ContactEntry</span><span class="p">,</span>
    <span class="n">ContactEntryArray</span><span class="p">,</span>
    <span class="n">ContactInfo</span><span class="p">,</span>
    <span class="n">ContactsGetContactReturnFunction</span><span class="p">,</span>
    <span class="n">ContactsPutPushNameReturnFunction</span><span class="p">,</span>
    <span class="n">GroupParticipant</span><span class="p">,</span>
    <span class="n">Blocklist</span><span class="p">,</span>
    <span class="n">GroupLinkTarget</span><span class="p">,</span>
    <span class="n">MessageInfo</span><span class="p">,</span>
    <span class="n">JID</span><span class="p">,</span>
    <span class="n">NewsletterMessage</span><span class="p">,</span>
    <span class="n">NewsletterMetadata</span><span class="p">,</span>
    <span class="n">PrivacySettings</span><span class="p">,</span>
    <span class="n">ProfilePictureInfo</span><span class="p">,</span>
    <span class="n">SendRequestExtra</span><span class="p">,</span>
    <span class="n">StatusPrivacy</span><span class="p">,</span>
    <span class="n">UploadReturnFunction</span><span class="p">,</span>
    <span class="n">GroupInfo</span><span class="p">,</span>
    <span class="n">JoinGroupWithLinkReturnFunction</span><span class="p">,</span>
    <span class="n">GetGroupInviteLinkReturnFunction</span><span class="p">,</span>
    <span class="n">GetGroupInfoReturnFunction</span><span class="p">,</span>
    <span class="n">DownloadReturnFunction</span><span class="p">,</span>
    <span class="n">SendMessageReturnFunction</span><span class="p">,</span>
    <span class="n">UploadResponse</span><span class="p">,</span>
    <span class="n">SetGroupPhotoReturnFunction</span><span class="p">,</span>
    <span class="n">ReqCreateGroup</span><span class="p">,</span>
    <span class="n">GroupLinkedParent</span><span class="p">,</span>
    <span class="n">GroupParent</span><span class="p">,</span>
    <span class="n">IsOnWhatsAppReturnFunction</span><span class="p">,</span>
    <span class="n">IsOnWhatsAppResponse</span><span class="p">,</span>
    <span class="n">JIDArray</span><span class="p">,</span>
    <span class="n">GetUserInfoReturnFunction</span><span class="p">,</span>
    <span class="n">GetUserInfoSingleReturnFunction</span><span class="p">,</span>
    <span class="n">SendResponse</span><span class="p">,</span>
    <span class="n">Device</span><span class="p">,</span>
    <span class="n">ReturnFunctionWithError</span><span class="p">,</span>
    <span class="n">LocalChatSettings</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.proto.waCompanionReg.WAWebProtobufsCompanionReg_pb2</span><span class="w"> </span><span class="kn">import</span> <span class="n">DeviceProps</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.proto.waE2E.WAWebProtobufsE2E_pb2</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Message</span><span class="p">,</span>
    <span class="n">StickerMessage</span><span class="p">,</span>
    <span class="n">ContextInfo</span><span class="p">,</span>
    <span class="n">ExtendedTextMessage</span><span class="p">,</span>
    <span class="n">VideoMessage</span><span class="p">,</span>
    <span class="n">ImageMessage</span><span class="p">,</span>
    <span class="n">AudioMessage</span><span class="p">,</span>
    <span class="n">DocumentMessage</span><span class="p">,</span>
    <span class="n">ContactMessage</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.proto.waConsumerApplication.WAConsumerApplication_pb2</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConsumerApplication</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.proto.waMsgApplication.WAMsgApplication_pb2</span><span class="w"> </span><span class="kn">import</span> <span class="n">MessageApplication</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">MessageServerID</span><span class="p">,</span> <span class="n">MessageWithContextInfo</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">add_exif</span><span class="p">,</span> <span class="n">gen_vcard</span><span class="p">,</span> <span class="n">log</span><span class="p">,</span> <span class="n">validate_link</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.utils.enum</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">BlocklistAction</span><span class="p">,</span>
    <span class="n">MediaType</span><span class="p">,</span>
    <span class="n">ChatPresence</span><span class="p">,</span>
    <span class="n">ChatPresenceMedia</span><span class="p">,</span>
    <span class="n">LogLevel</span><span class="p">,</span>
    <span class="n">ParticipantChange</span><span class="p">,</span>
    <span class="n">Presence</span><span class="p">,</span>
    <span class="n">ReceiptType</span><span class="p">,</span>
    <span class="n">ClientType</span><span class="p">,</span>
    <span class="n">ClientName</span><span class="p">,</span>
    <span class="n">PrivacySetting</span><span class="p">,</span>
    <span class="n">PrivacySettingType</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.utils.ffmpeg</span><span class="w"> </span><span class="kn">import</span> <span class="n">FFmpeg</span><span class="p">,</span> <span class="n">ImageFormat</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.utils.iofile</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_bytes_from_name_or_url</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.utils.jid</span><span class="w"> </span><span class="kn">import</span> <span class="n">Jid2String</span><span class="p">,</span> <span class="n">JIDToNonAD</span><span class="p">,</span> <span class="n">build_jid</span>


<div class="viewcode-block" id="ContactStore">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ContactStore">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ContactStore</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uuid</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span> <span class="o">=</span> <span class="n">uuid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__client</span> <span class="o">=</span> <span class="n">gocode</span>

<div class="viewcode-block" id="ContactStore.put_pushname">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ContactStore.put_pushname">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">put_pushname</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">pushname</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ContactsPutPushNameReturnFunction</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the pushname of a specific user.</span>

<span class="sd">        :param user: The JID (Jabber ID) of the user whose pushname needs to be updated.</span>
<span class="sd">        :type user: JID</span>
<span class="sd">        :param pushname: The new pushname for the user.</span>
<span class="sd">        :type pushname: str</span>
<span class="sd">        :raises ContactStoreError: If there is any error updating the pushname.</span>
<span class="sd">        :return: The updated contact model after the pushname has been updated.</span>
<span class="sd">        :rtype: ContactsPutPushNameReturnFunction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_bytes</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">ContactsPutPushNameReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">PutPushName</span><span class="p">(</span>
                <span class="n">user_bytes</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">user_bytes</span><span class="p">),</span> <span class="n">pushname</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ContactStoreError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span></div>


<div class="viewcode-block" id="ContactStore.put_contact_name">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ContactStore.put_contact_name">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">put_contact_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">fullname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">firstname</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is used to update the contact name in the contact store. It takes the user&#39;s JID,</span>
<span class="sd">        full name and first name as input parameters,</span>
<span class="sd">        then calls the PutContactName method of the client with the user&#39;s JID, full name and first name.</span>
<span class="sd">        If there is an error, it returns a ContactStoreError with the error message.</span>

<span class="sd">        :param user: The JID of the user whose contact name is to be updated</span>
<span class="sd">        :type user: JID</span>
<span class="sd">        :param fullname: The full name of the user</span>
<span class="sd">        :type fullname: str</span>
<span class="sd">        :param firstname: The first name of the user</span>
<span class="sd">        :type firstname: str</span>
<span class="sd">        :return: If there is an error, return a ContactStoreError with the error message, else None</span>
<span class="sd">        :rtype: ContactStoreError or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_bytes</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">PutContactName</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
            <span class="n">user_bytes</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">user_bytes</span><span class="p">),</span>
            <span class="n">fullname</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
            <span class="n">firstname</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ContactStoreError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="ContactStore.put_all_contact_name">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ContactStore.put_all_contact_name">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">put_all_contact_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contact_entry</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">ContactEntry</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method serializes a list of ContactEntry objects and sends them to a</span>
<span class="sd">        remote service using the client&#39;s PutAllContactNames method. If the service</span>
<span class="sd">        returns an error, it raises a ContactStoreError with the error message.</span>

<span class="sd">        :param contact_entry: List of ContactEntry objects to be serialized and sent</span>
<span class="sd">        :type contact_entry: List[ContactEntry]</span>
<span class="sd">        :raises ContactStoreError: If the remote service returns an error message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">ContactEntryArray</span><span class="p">(</span><span class="n">ContactEntry</span><span class="o">=</span><span class="n">contact_entry</span><span class="p">)</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">PutAllContactNames</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">entry</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">entry</span><span class="p">))</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ContactStoreError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="ContactStore.get_contact">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ContactStore.get_contact">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_contact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">JID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ContactInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method retrieves a user&#39;s contact information based on their JID (Jabber Identifier).</span>

<span class="sd">        :param user: The Jabber Identifier of the user whose contact information is to be retrieved.</span>
<span class="sd">        :type user: JID</span>
<span class="sd">        :raises ContactStoreError: If there is an error while retrieving the contact information.</span>
<span class="sd">        :return: The contact information of the user.</span>
<span class="sd">        :rtype: ContactInfo</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">ContactsGetContactReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetContact</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid</span><span class="p">))</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ContactStoreError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">ContactInfo</span></div>


<div class="viewcode-block" id="ContactStore.get_all_contacts">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ContactStore.get_all_contacts">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_contacts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RepeatedCompositeFieldContainer</span><span class="p">[</span><span class="n">Contact</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function retrieves all contacts from the client. It deserializes the response</span>
<span class="sd">        from the client, checks for any errors, and if there are no errors, returns the contacts.</span>

<span class="sd">        :raises ContactStoreError: If there is an error in the response from the client.</span>
<span class="sd">        :return: A list of all contacts.</span>
<span class="sd">        :rtype: RepeatedCompositeFieldContainer[Contact]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">ContactsGetAllContactsReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetAllContacts</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ContactStoreError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Contact</span></div>
</div>



<div class="viewcode-block" id="ChatSettingsStore">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ChatSettingsStore">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ChatSettingsStore</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uuid</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the ChatSettingsStore with a unique identifier.</span>

<span class="sd">        :param uuid: Unique identifier for the chat settings store.</span>
<span class="sd">        :type uuid: bytes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span> <span class="o">=</span> <span class="n">uuid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__client</span> <span class="o">=</span> <span class="n">gocode</span>

<div class="viewcode-block" id="ChatSettingsStore.put_muted_until">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ChatSettingsStore.put_muted_until">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">put_muted_until</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">until</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mute a user until a specified time.</span>

<span class="sd">        :param user: The user to be muted.</span>
<span class="sd">        :type user: JID</span>
<span class="sd">        :param until: The duration until when the user will be muted.</span>
<span class="sd">        :type until: timedelta</span>
<span class="sd">        :raises PutMutedUntilError: If there is an error while muting the user.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_buf</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">return_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">PutMutedUntil</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">user_buf</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">user_buf</span><span class="p">),</span> <span class="n">until</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">return_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PutMutedUntilError</span><span class="p">(</span><span class="n">return_</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span></div>


<div class="viewcode-block" id="ChatSettingsStore.put_pinned">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ChatSettingsStore.put_pinned">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">put_pinned</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">pinned</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pin or unpin a user.</span>

<span class="sd">        :param user: The user to be pinned or unpinned.</span>
<span class="sd">        :type user: JID</span>
<span class="sd">        :param pinned: True if the user should be pinned, False otherwise.</span>
<span class="sd">        :type pinned: bool</span>
<span class="sd">        :raises PutPinnedError: If there is an error while pinning the user.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_buf</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">return_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">PutPinned</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">user_buf</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">user_buf</span><span class="p">),</span> <span class="n">pinned</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">return_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PutPinnedError</span><span class="p">(</span><span class="n">return_</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span></div>


<div class="viewcode-block" id="ChatSettingsStore.put_archived">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ChatSettingsStore.put_archived">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">put_archived</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">archived</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Archive or unarchive a user.</span>

<span class="sd">        :param user: The user to be archived or unarchived.</span>
<span class="sd">        :type user: JID</span>
<span class="sd">        :param archived: True if the user should be archived, False otherwise.</span>
<span class="sd">        :type archived: bool</span>
<span class="sd">        :raises PutArchivedError: If there is an error while archiving the user.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_buf</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">return_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">PutArchived</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">user_buf</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">user_buf</span><span class="p">),</span> <span class="n">archived</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">return_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PutArchivedError</span><span class="p">(</span><span class="n">return_</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span></div>


<div class="viewcode-block" id="ChatSettingsStore.get_chat_settings">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ChatSettingsStore.get_chat_settings">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_chat_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="n">JID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LocalChatSettings</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the chat settings for a user.</span>

<span class="sd">        :param user: The user whose chat settings are to be retrieved.</span>
<span class="sd">        :type user: JID</span>
<span class="sd">        :raises GetChatSettingsError: If there is an error while retrieving the chat settings.</span>
<span class="sd">        :return: The chat settings for the specified user.</span>
<span class="sd">        :rtype: LocalChatSettings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_buf</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">return_</span> <span class="o">=</span> <span class="n">ReturnFunctionWithError</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetChatSettings</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">user_buf</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">user_buf</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">return_</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetChatSettingsError</span><span class="p">(</span><span class="n">return_</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">return_</span><span class="o">.</span><span class="n">LocalChatSettings</span></div>
</div>



<div class="viewcode-block" id="NewClient">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">NewClient</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">jid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">JID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">props</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DeviceProps</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initializes a new client instance.</span>

<span class="sd">        :param name: The name or identifier for the new client.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :param jid: Optional. The JID (Jabber Identifier) for the client. If not provided, first client is used.</span>
<span class="sd">        :param qrCallback: Optional. A callback function for handling QR code updates, defaults to None.</span>
<span class="sd">        :type qrCallback: Optional[Callable[[NewClient, bytes], None]], optional</span>
<span class="sd">        :param messageCallback: Optional. A callback function for handling incoming messages, defaults to None.</span>
<span class="sd">        :type messageCallback: Optional[Callable[[NewClient, MessageSource, Message], None]], optional</span>
<span class="sd">        :param uuid: Optional. A unique identifier for the client, defaults to None.</span>
<span class="sd">        :type uuid: Optional[str], optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device_props</span> <span class="o">=</span> <span class="n">props</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">jid</span> <span class="o">=</span> <span class="n">jid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span> <span class="o">=</span> <span class="p">((</span><span class="n">jid</span><span class="o">.</span><span class="n">User</span> <span class="k">if</span> <span class="n">jid</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="n">uuid</span> <span class="ow">or</span> <span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__client</span> <span class="o">=</span> <span class="n">gocode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blocking</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">blocking</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">qr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contact</span> <span class="o">=</span> <span class="n">ContactStore</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chat_settings</span> <span class="o">=</span> <span class="n">ChatSettingsStore</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot; Creating a NewClient instance&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__onLoginStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__onQr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qr_protoaddr</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method triggers an event when a QR code is detected.</span>

<span class="sd">        :param qr_protoaddr: The address of the QR code in memory.</span>
<span class="sd">        :type qr_protoaddr: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">_qr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">string_at</span><span class="p">(</span><span class="n">qr_protoaddr</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_mention</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function parses a given text and returns a list of &#39;mentions&#39; in the format of &#39;mention@s.whatsapp.net&#39;.</span>
<span class="sd">        A &#39;mention&#39; is defined as a sequence of numbers (5 to 16 digits long) that is prefixed by &#39;@&#39; in the text.</span>

<span class="sd">        :param text: The text to be parsed for mentions, defaults to None</span>
<span class="sd">        :type text: Optional[str], optional</span>
<span class="sd">        :return: A list of mentions in the format of &#39;mention@s.whatsapp.net&#39;</span>
<span class="sd">        :rtype: list[str]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">text</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">jid</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;@s.whatsapp.net&quot;</span>
            <span class="k">for</span> <span class="n">jid</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;@([0-9]{5,16}|0)&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_generate_link_preview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ExtendedTextMessage</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">youtube_url_pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
            <span class="sa">r</span><span class="s2">&quot;(?:https?:)?//(?:www\.)?(?:youtube\.com/(?:[^/\n\s]+&quot;</span>
            <span class="sa">r</span><span class="s2">&quot;/\S+/|(?:v|e(?:mbed)?)/|\S*?[?&amp;]v=)|youtu\.be/)([a-zA-Z0-9_-]</span><span class="si">{11}</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">links</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;https?://\S+&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="n">valid_links</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">validate_link</span><span class="p">,</span> <span class="n">links</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">valid_links</span><span class="p">:</span>
            <span class="n">preview</span> <span class="o">=</span> <span class="n">link_preview</span><span class="p">(</span><span class="n">valid_links</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">preview_type</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">ExtendedTextMessage</span><span class="o">.</span><span class="n">PreviewType</span><span class="o">.</span><span class="n">VIDEO</span>
                <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">youtube_url_pattern</span><span class="p">,</span> <span class="n">valid_links</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">else</span> <span class="n">ExtendedTextMessage</span><span class="o">.</span><span class="n">PreviewType</span><span class="o">.</span><span class="n">NONE</span>
            <span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">ExtendedTextMessage</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">preview</span><span class="o">.</span><span class="n">title</span><span class="p">),</span>
                <span class="n">description</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">preview</span><span class="o">.</span><span class="n">description</span><span class="p">),</span>
                <span class="n">matchedText</span><span class="o">=</span><span class="n">valid_links</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">canonicalURL</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">preview</span><span class="o">.</span><span class="n">link</span><span class="o">.</span><span class="n">url</span><span class="p">),</span>
                <span class="n">previewType</span><span class="o">=</span><span class="n">preview_type</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">preview</span><span class="o">.</span><span class="n">absolute_image</span><span class="p">:</span>
                <span class="n">thumbnail</span> <span class="o">=</span> <span class="n">get_bytes_from_name_or_url</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">preview</span><span class="o">.</span><span class="n">absolute_image</span><span class="p">))</span>
                <span class="n">mimetype</span> <span class="o">=</span> <span class="n">magic</span><span class="o">.</span><span class="n">from_buffer</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">,</span> <span class="n">mime</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="k">if</span> <span class="s2">&quot;jpeg&quot;</span> <span class="ow">in</span> <span class="n">mimetype</span> <span class="ow">or</span> <span class="s2">&quot;png&quot;</span> <span class="ow">in</span> <span class="n">mimetype</span><span class="p">:</span>
                    <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">))</span>
                    <span class="n">upload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">,</span> <span class="n">MediaType</span><span class="o">.</span><span class="n">MediaLinkThumbnail</span><span class="p">)</span>
                    <span class="n">msg</span><span class="o">.</span><span class="n">MergeFrom</span><span class="p">(</span>
                        <span class="n">ExtendedTextMessage</span><span class="p">(</span>
                            <span class="n">JPEGThumbnail</span><span class="o">=</span><span class="n">thumbnail</span><span class="p">,</span>
                            <span class="n">thumbnailDirectPath</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">DirectPath</span><span class="p">,</span>
                            <span class="n">thumbnailSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileSHA256</span><span class="p">,</span>
                            <span class="n">thumbnailEncSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileEncSHA256</span><span class="p">,</span>
                            <span class="n">mediaKey</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">MediaKey</span><span class="p">,</span>
                            <span class="n">mediaKeyTimestamp</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()),</span>
                            <span class="n">thumbnailWidth</span><span class="o">=</span><span class="n">image</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                            <span class="n">thumbnailHeight</span><span class="o">=</span><span class="n">image</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
            <span class="k">return</span> <span class="n">msg</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_make_quoted_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">,</span> <span class="n">reply_privately</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ContextInfo</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ContextInfo</span><span class="p">(</span>
            <span class="n">stanzaID</span><span class="o">=</span><span class="n">message</span><span class="o">.</span><span class="n">Info</span><span class="o">.</span><span class="n">ID</span><span class="p">,</span>
            <span class="n">participant</span><span class="o">=</span><span class="n">Jid2String</span><span class="p">(</span><span class="n">JIDToNonAD</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">Info</span><span class="o">.</span><span class="n">MessageSource</span><span class="o">.</span><span class="n">Sender</span><span class="p">)),</span>
            <span class="n">quotedMessage</span><span class="o">=</span><span class="n">message</span><span class="o">.</span><span class="n">Message</span><span class="p">,</span>
            <span class="n">remoteJID</span><span class="o">=</span><span class="n">Jid2String</span><span class="p">(</span><span class="n">JIDToNonAD</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">Info</span><span class="o">.</span><span class="n">MessageSource</span><span class="o">.</span><span class="n">Chat</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">reply_privately</span>
            <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>

<div class="viewcode-block" id="NewClient.send_message">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.send_message">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">to</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">Message</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">link_preview</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SendResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send a message to the specified JID.</span>

<span class="sd">        :param to: The JID to send the message to.</span>
<span class="sd">        :type to: JID</span>
<span class="sd">        :param message: The message to send.</span>
<span class="sd">        :type message: typing.Union[Message, str]</span>
<span class="sd">        :param link_preview: Whether to send a link preview, defaults to False</span>
<span class="sd">        :type link_preview: bool, optional</span>
<span class="sd">        :raises SendMessageError: If there was an error sending the message.</span>
<span class="sd">        :return: The response from the server.</span>
<span class="sd">        :rtype: SendResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">to_bytes</span> <span class="o">=</span> <span class="n">to</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">mentioned_jid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_mention</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="n">partial_msg</span> <span class="o">=</span> <span class="n">ExtendedTextMessage</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">contextInfo</span><span class="o">=</span><span class="n">ContextInfo</span><span class="p">(</span><span class="n">mentionedJID</span><span class="o">=</span><span class="n">mentioned_jid</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">link_preview</span><span class="p">:</span>
                <span class="n">preview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_link_preview</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">preview</span><span class="p">:</span>
                    <span class="n">partial_msg</span><span class="o">.</span><span class="n">MergeFrom</span><span class="p">(</span><span class="n">preview</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">partial_msg</span><span class="o">.</span><span class="n">previewType</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">mentioned_jid</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span><span class="n">conversation</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span><span class="n">extendedTextMessage</span><span class="o">=</span><span class="n">partial_msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">message</span>
        <span class="n">message_bytes</span> <span class="o">=</span> <span class="n">msg</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">sendresponse</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SendMessage</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">to_bytes</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">to_bytes</span><span class="p">),</span> <span class="n">message_bytes</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">message_bytes</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">SendMessageReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="n">sendresponse</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SendMessageError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">SendResponse</span></div>


<div class="viewcode-block" id="NewClient.build_reply_message">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.build_reply_message">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">build_reply_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MessageWithContextInfo</span><span class="p">],</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">,</span>
        <span class="n">link_preview</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">reply_privately</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send a reply message to a specified JID.</span>

<span class="sd">        :param message: The message to be sent. Can be a string or a MessageWithContextInfo object.</span>
<span class="sd">        :type message: typing.Union[str, MessageWithContextInfo]</span>
<span class="sd">        :param quoted: The message to be quoted in the message being sent.</span>
<span class="sd">        :type quoted: neonize_proto.Message</span>
<span class="sd">        :param link_preview: If set to True, enables link previews in the message being sent. Defaults to False.</span>
<span class="sd">        :type link_preview: bool, optional</span>
<span class="sd">        :param reply_privately: If set to True, the message is sent as a private reply. Defaults to False.</span>
<span class="sd">        :type reply_privately: bool, optional</span>
<span class="sd">        :param mentioned_jid: List of JIDs to be mentioned in the message. Defaults to an empty list.</span>
<span class="sd">        :type mentioned_jid: List[str], optional</span>
<span class="sd">        :return: Response of the send operation.</span>
<span class="sd">        :rtype: SendResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">build_message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">partial_message</span> <span class="o">=</span> <span class="n">ExtendedTextMessage</span><span class="p">(</span>
                <span class="n">text</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
                <span class="n">contextInfo</span><span class="o">=</span><span class="n">ContextInfo</span><span class="p">(</span><span class="n">mentionedJID</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parse_mention</span><span class="p">(</span><span class="n">message</span><span class="p">)),</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">link_preview</span><span class="p">:</span>
                <span class="n">preview</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_link_preview</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">preview</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">partial_message</span><span class="o">.</span><span class="n">MergeFrom</span><span class="p">(</span><span class="n">preview</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">partial_message</span> <span class="o">=</span> <span class="n">message</span>
        <span class="n">field_name</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">partial_message</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="o">+</span> <span class="n">partial_message</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="p">)</span>  <span class="c1"># type: ignore</span>
        <span class="n">partial_message</span><span class="o">.</span><span class="n">contextInfo</span><span class="o">.</span><span class="n">MergeFrom</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_make_quoted_message</span><span class="p">(</span><span class="n">quoted</span><span class="p">,</span> <span class="n">reply_privately</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="nb">getattr</span><span class="p">(</span><span class="n">build_message</span><span class="p">,</span> <span class="n">field_name</span><span class="p">)</span><span class="o">.</span><span class="n">MergeFrom</span><span class="p">(</span><span class="n">partial_message</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">build_message</span></div>


<div class="viewcode-block" id="NewClient.reply_message">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.reply_message">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reply_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MessageWithContextInfo</span><span class="p">],</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">,</span>
        <span class="n">to</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">JID</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">link_preview</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">reply_privately</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SendResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Send a reply message to a specified JID.</span>

<span class="sd">        :param message: The message to be sent. Can be a string or a MessageWithContextInfo object.</span>
<span class="sd">        :type message: typing.Union[str, MessageWithContextInfo]</span>
<span class="sd">        :param quoted: The message to be quoted in the message being sent.</span>
<span class="sd">        :type quoted: neonize_proto.Message</span>
<span class="sd">        :param to: The recipient of the message. If not specified, the message is sent to the default recipient.</span>
<span class="sd">        :type to: Optional[JID], optional</span>
<span class="sd">        :param link_preview: If set to True, enables link previews in the message being sent. Defaults to False.</span>
<span class="sd">        :type link_preview: bool, optional</span>
<span class="sd">        :param reply_privately: If set to True, the message is sent as a private reply. Defaults to False.</span>
<span class="sd">        :type reply_privately: bool, optional</span>
<span class="sd">        :param mentioned_jid: List of JIDs to be mentioned in the message. Defaults to an empty list.</span>
<span class="sd">        :type mentioned_jid: List[str], optional</span>
<span class="sd">        :return: Response of the send operation.</span>
<span class="sd">        :rtype: SendResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">to</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">reply_privately</span><span class="p">:</span>
                <span class="n">to</span> <span class="o">=</span> <span class="n">JIDToNonAD</span><span class="p">(</span><span class="n">quoted</span><span class="o">.</span><span class="n">Info</span><span class="o">.</span><span class="n">MessageSource</span><span class="o">.</span><span class="n">Sender</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">to</span> <span class="o">=</span> <span class="n">quoted</span><span class="o">.</span><span class="n">Info</span><span class="o">.</span><span class="n">MessageSource</span><span class="o">.</span><span class="n">Chat</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
            <span class="n">to</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_reply_message</span><span class="p">(</span>
                <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
                <span class="n">quoted</span><span class="o">=</span><span class="n">quoted</span><span class="p">,</span>
                <span class="n">link_preview</span><span class="o">=</span><span class="n">link_preview</span><span class="p">,</span>
                <span class="n">reply_privately</span><span class="o">=</span><span class="n">reply_privately</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">link_preview</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.edit_message">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.edit_message">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">edit_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">chat</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_message</span><span class="p">:</span> <span class="n">Message</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SendResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Edit a message.</span>

<span class="sd">        :param chat: Chat ID</span>
<span class="sd">        :type chat: JID</span>
<span class="sd">        :param message_id: Message ID</span>
<span class="sd">        :type message_id: str</span>
<span class="sd">        :param new_message: New message</span>
<span class="sd">        :type new_message: Message</span>
<span class="sd">        :return: Response from server</span>
<span class="sd">        :rtype: SendResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">build_edit</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">new_message</span><span class="p">))</span></div>


<div class="viewcode-block" id="NewClient.revoke_message">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.revoke_message">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">revoke_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">chat</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SendResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Revoke a message.</span>

<span class="sd">        :param chat: Chat ID</span>
<span class="sd">        :type chat: JID</span>
<span class="sd">        :param sender: Sender ID</span>
<span class="sd">        :type sender: JID</span>
<span class="sd">        :param message_id: Message ID</span>
<span class="sd">        :type message_id: str</span>
<span class="sd">        :return: Response from server</span>
<span class="sd">        :rtype: SendResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_revoke</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">sender</span><span class="p">,</span> <span class="n">message_id</span><span class="p">))</span></div>


<div class="viewcode-block" id="NewClient.build_poll_vote_creation">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.build_poll_vote_creation">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">build_poll_vote_creation</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">options</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">selectable_count</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build a poll vote creation message.</span>

<span class="sd">        :param name: The name of the poll.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :param options: The options for the poll.</span>
<span class="sd">        :type options: List[str]</span>
<span class="sd">        :param selectable_count: The number of selectable options.</span>
<span class="sd">        :type selectable_count: int</span>
<span class="sd">        :return: The poll vote creation message.</span>
<span class="sd">        :rtype: Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">options_buf</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">ArrayString</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">options</span><span class="p">)</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">Message</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">BuildPollVoteCreation</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
                <span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
                <span class="n">options_buf</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">options_buf</span><span class="p">),</span>
                <span class="n">selectable_count</span><span class="p">,</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.build_poll_vote">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.build_poll_vote">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">build_poll_vote</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">poll_info</span><span class="p">:</span> <span class="n">MessageInfo</span><span class="p">,</span> <span class="n">option_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Builds a poll vote.</span>

<span class="sd">        :param poll_info: The information about the poll.</span>
<span class="sd">        :type poll_info: MessageInfo</span>
<span class="sd">        :param option_names: The names of the options to vote for.</span>
<span class="sd">        :type option_names: List[str]</span>
<span class="sd">        :return: The poll vote message.</span>
<span class="sd">        :rtype: Message</span>
<span class="sd">        :raises BuildPollVoteError: If there is an error building the poll vote.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">option_names_proto</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">ArrayString</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">option_names</span>
        <span class="p">)</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">poll_info_proto</span> <span class="o">=</span> <span class="n">poll_info</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">BuildPollVote</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
            <span class="n">poll_info_proto</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">poll_info_proto</span><span class="p">),</span>
            <span class="n">option_names_proto</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">option_names_proto</span><span class="p">),</span>
        <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">BuildPollVoteReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">BuildPollVoteError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">PollVote</span></div>


<div class="viewcode-block" id="NewClient.build_reaction">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.build_reaction">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">build_reaction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">chat</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">reaction</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function builds a reaction message in a chat. It takes the chat and sender IDs,</span>
<span class="sd">        the message ID to which the reaction is being made, and the reaction itself as input.</span>
<span class="sd">        It then serializes the chat and sender IDs to strings, and calls the BuildReaction</span>
<span class="sd">        function of the client with these serialized IDs, the message ID, and the reaction.</span>
<span class="sd">        It finally returns the reaction message.</span>

<span class="sd">        :param chat: The ID of the chat in which the reaction is being made</span>
<span class="sd">        :type chat: JID</span>
<span class="sd">        :param sender: The ID of the sender making the reaction</span>
<span class="sd">        :type sender: JID</span>
<span class="sd">        :param message_id: The ID of the message to which the reaction is being made</span>
<span class="sd">        :type message_id: str</span>
<span class="sd">        :param reaction: The reaction being made</span>
<span class="sd">        :type reaction: str</span>
<span class="sd">        :return: The reaction message</span>
<span class="sd">        :rtype: Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sender_proto</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">chat_proto</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">Message</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">BuildReaction</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
                <span class="n">chat_proto</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">chat_proto</span><span class="p">),</span>
                <span class="n">sender_proto</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">sender_proto</span><span class="p">),</span>
                <span class="n">message_id</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
                <span class="n">reaction</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.build_revoke">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.build_revoke">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">build_revoke</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">chat</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">sender</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">with_go</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Builds a message to revoke a previous message.</span>

<span class="sd">        :param chat: The JID (Jabber Identifier) of the chat where the message should be revoked.</span>
<span class="sd">        :type chat: JID</span>
<span class="sd">        :param sender: The JID of the sender of the message to be revoked.</span>
<span class="sd">        :type sender: JID</span>
<span class="sd">        :param message_id: The unique identifier of the message to be revoked.</span>
<span class="sd">        :type message_id: str</span>
<span class="sd">        :return: The constructed Message object for revoking the specified message.</span>
<span class="sd">        :rtype: Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">with_go</span><span class="p">:</span>
            <span class="n">chat_buf</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
            <span class="n">sender_buf</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">Message</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">BuildRevoke</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
                    <span class="n">chat_buf</span><span class="p">,</span>
                    <span class="nb">len</span><span class="p">(</span><span class="n">chat_buf</span><span class="p">),</span>
                    <span class="n">sender_buf</span><span class="p">,</span>
                    <span class="nb">len</span><span class="p">(</span><span class="n">sender_buf</span><span class="p">),</span>
                    <span class="n">message_id</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
                <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">build_revoke</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">sender</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_me</span><span class="p">()</span><span class="o">.</span><span class="n">JID</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.build_sticker_message">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.build_sticker_message">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">build_sticker_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">],</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">packname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function builds a sticker message from a given image or video file.</span>
<span class="sd">        The file is converted to a webp format and uploaded to a server.</span>
<span class="sd">        The resulting URL and other metadata are used to construct the sticker message.</span>

<span class="sd">        :param file: The path to the image or video file or the file data in bytes</span>
<span class="sd">        :type file: typing.Union[str, bytes]</span>
<span class="sd">        :param quoted: A message that the sticker message is a reply to, defaults to None</span>
<span class="sd">        :type quoted: Optional[neonize_proto.Message], optional</span>
<span class="sd">        :param name: The name of the sticker, defaults to &quot;&quot;</span>
<span class="sd">        :type name: str, optional</span>
<span class="sd">        :param packname: The name of the sticker pack, defaults to &quot;&quot;</span>
<span class="sd">        :type packname: str, optional</span>
<span class="sd">        :return: The constructed sticker message</span>
<span class="sd">        :rtype: Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sticker</span> <span class="o">=</span> <span class="n">get_bytes_from_name_or_url</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="n">animated</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">mime</span> <span class="o">=</span> <span class="n">magic</span><span class="o">.</span><span class="n">from_buffer</span><span class="p">(</span><span class="n">sticker</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mime</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;image&quot;</span><span class="p">:</span>
            <span class="n">io_save</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">sticker</span><span class="p">)</span>
            <span class="n">stk</span> <span class="o">=</span> <span class="n">auto_sticker</span><span class="p">(</span><span class="n">io_save</span><span class="p">)</span>
            <span class="n">stk</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
                <span class="n">io_save</span><span class="p">,</span>
                <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;webp&quot;</span><span class="p">,</span>
                <span class="n">exif</span><span class="o">=</span><span class="n">add_exif</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">packname</span><span class="p">),</span>
                <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">io_save</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">FFmpeg</span><span class="p">(</span><span class="n">sticker</span><span class="p">)</span> <span class="k">as</span> <span class="n">ffmpeg</span><span class="p">:</span>
                <span class="n">animated</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">sticker</span> <span class="o">=</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">cv_to_webp</span><span class="p">()</span>
                <span class="n">io_save</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">sticker</span><span class="p">)</span>
                <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">io_save</span><span class="p">)</span>
                <span class="n">io_save</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
                    <span class="n">io_save</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;webp&quot;</span><span class="p">,</span> <span class="n">exif</span><span class="o">=</span><span class="n">add_exif</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">packname</span><span class="p">),</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span>
                <span class="p">)</span>
        <span class="n">upload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">io_save</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span>
            <span class="n">stickerMessage</span><span class="o">=</span><span class="n">StickerMessage</span><span class="p">(</span>
                <span class="n">URL</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
                <span class="n">directPath</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">DirectPath</span><span class="p">,</span>
                <span class="n">fileEncSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileEncSHA256</span><span class="p">,</span>
                <span class="n">fileLength</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileLength</span><span class="p">,</span>
                <span class="n">fileSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileSHA256</span><span class="p">,</span>
                <span class="n">mediaKey</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">MediaKey</span><span class="p">,</span>
                <span class="n">mimetype</span><span class="o">=</span><span class="n">magic</span><span class="o">.</span><span class="n">from_buffer</span><span class="p">(</span><span class="n">io_save</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(),</span> <span class="n">mime</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                <span class="n">isAnimated</span><span class="o">=</span><span class="n">animated</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">quoted</span><span class="p">:</span>
            <span class="n">message</span><span class="o">.</span><span class="n">stickerMessage</span><span class="o">.</span><span class="n">contextInfo</span><span class="o">.</span><span class="n">MergeFrom</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_make_quoted_message</span><span class="p">(</span><span class="n">quoted</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">message</span></div>


<div class="viewcode-block" id="NewClient.send_sticker">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.send_sticker">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_sticker</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">to</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">],</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">packname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SendResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Send a sticker to a specific JID.</span>

<span class="sd">        :param to: The JID to send the sticker to.</span>
<span class="sd">        :type to: JID</span>
<span class="sd">        :param file: The file path of the sticker or the sticker data in bytes.</span>
<span class="sd">        :type file: typing.Union[str, bytes]</span>
<span class="sd">        :param quoted: The quoted message, if any, defaults to None.</span>
<span class="sd">        :type quoted: Optional[neonize_proto.Message], optional</span>
<span class="sd">        :param name: The name of the sticker, defaults to &quot;&quot;.</span>
<span class="sd">        :type name: str, optional</span>
<span class="sd">        :param packname: The name of the sticker pack, defaults to &quot;&quot;.</span>
<span class="sd">        :type packname: str, optional</span>
<span class="sd">        :return: The response from the send message function.</span>
<span class="sd">        :rtype: SendResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
            <span class="n">to</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_sticker_message</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">quoted</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">packname</span><span class="p">),</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.build_video_message">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.build_video_message">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">build_video_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">caption</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">viewonce</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function is used to build a video message. It uploads a video file, extracts necessary information,</span>
<span class="sd">        and constructs a message with the given parameters.</span>

<span class="sd">        :param file: The file path or bytes of the video file to be uploaded.</span>
<span class="sd">        :type file: str | bytes</span>
<span class="sd">        :param caption: The caption to be added to the video message, defaults to None</span>
<span class="sd">        :type caption: Optional[str], optional</span>
<span class="sd">        :param quoted: A message that the video message is in response to, defaults to None</span>
<span class="sd">        :type quoted: Optional[neonize_proto.Message], optional</span>
<span class="sd">        :param viewonce: A flag indicating if the video message can be viewed only once, defaults to False</span>
<span class="sd">        :type viewonce: bool, optional</span>
<span class="sd">        :return: A video message with the given parameters.</span>
<span class="sd">        :rtype: Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">io</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">get_bytes_from_name_or_url</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
        <span class="n">io</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">buff</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">with</span> <span class="n">FFmpeg</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="k">as</span> <span class="n">ffmpeg</span><span class="p">:</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ffmpeg</span><span class="o">.</span><span class="n">extract_info</span><span class="p">()</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
            <span class="n">thumbnail</span> <span class="o">=</span> <span class="n">ffmpeg</span><span class="o">.</span><span class="n">extract_thumbnail</span><span class="p">()</span>
        <span class="n">upload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">buff</span><span class="p">)</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span>
            <span class="n">videoMessage</span><span class="o">=</span><span class="n">VideoMessage</span><span class="p">(</span>
                <span class="n">URL</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
                <span class="n">caption</span><span class="o">=</span><span class="n">caption</span><span class="p">,</span>
                <span class="n">seconds</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span>
                <span class="n">directPath</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">DirectPath</span><span class="p">,</span>
                <span class="n">fileEncSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileEncSHA256</span><span class="p">,</span>
                <span class="n">fileLength</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileLength</span><span class="p">,</span>
                <span class="n">fileSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileSHA256</span><span class="p">,</span>
                <span class="n">mediaKey</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">MediaKey</span><span class="p">,</span>
                <span class="n">mimetype</span><span class="o">=</span><span class="n">magic</span><span class="o">.</span><span class="n">from_buffer</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="n">mime</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                <span class="n">JPEGThumbnail</span><span class="o">=</span><span class="n">thumbnail</span><span class="p">,</span>
                <span class="n">thumbnailDirectPath</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">DirectPath</span><span class="p">,</span>
                <span class="n">thumbnailEncSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileEncSHA256</span><span class="p">,</span>
                <span class="n">thumbnailSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileSHA256</span><span class="p">,</span>
                <span class="n">viewOnce</span><span class="o">=</span><span class="n">viewonce</span><span class="p">,</span>
                <span class="n">contextInfo</span><span class="o">=</span><span class="n">ContextInfo</span><span class="p">(</span>
                    <span class="n">mentionedJID</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parse_mention</span><span class="p">(</span><span class="n">caption</span><span class="p">),</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">quoted</span><span class="p">:</span>
            <span class="n">message</span><span class="o">.</span><span class="n">videoMessage</span><span class="o">.</span><span class="n">contextInfo</span><span class="o">.</span><span class="n">MergeFrom</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_make_quoted_message</span><span class="p">(</span><span class="n">quoted</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">message</span></div>


<div class="viewcode-block" id="NewClient.send_video">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.send_video">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_video</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">to</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">caption</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">viewonce</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SendResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sends a video to the specified recipient.</span>

<span class="sd">        :param to: The JID (Jabber Identifier) of the recipient.</span>
<span class="sd">        :type to: JID</span>
<span class="sd">        :param file: Either a file path (str), url (str) or binary data (bytes) representing the video.</span>
<span class="sd">        :type file: typing.Union[str | bytes]</span>
<span class="sd">        :param caption: Optional. The caption of the video. Defaults to None.</span>
<span class="sd">        :type caption: Optional[str], optional</span>
<span class="sd">        :param quoted: Optional. The message to which the video is a reply. Defaults to None.</span>
<span class="sd">        :type quoted: Optional[Message], optional</span>
<span class="sd">        :param viewonce: Optional. Whether the video should be viewonce. Defaults to False.</span>
<span class="sd">        :type viewonce: bool, optional</span>
<span class="sd">        :return: A function for handling the result of the video sending process.</span>
<span class="sd">        :rtype: SendResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
            <span class="n">to</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_video_message</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">caption</span><span class="p">,</span> <span class="n">quoted</span><span class="p">,</span> <span class="n">viewonce</span><span class="p">)</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.build_image_message">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.build_image_message">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">build_image_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">caption</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">viewonce</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function builds an image message. It takes a file (either a string or bytes),</span>
<span class="sd">        an optional caption, an optional quoted message, and a boolean indicating whether</span>
<span class="sd">        the message should be viewed once. It then uploads the image, generates a thumbnail,</span>
<span class="sd">        and constructs the message with the given parameters and the information from the</span>
<span class="sd">        uploaded image.</span>

<span class="sd">        :param file: The image file to be uploaded and sent, either as a string URL or bytes.</span>
<span class="sd">        :type file: str | bytes</span>
<span class="sd">        :param caption: The caption for the image message, defaults to None.</span>
<span class="sd">        :type caption: Optional[str], optional</span>
<span class="sd">        :param quoted: The message to be quoted in the image message, defaults to None.</span>
<span class="sd">        :type quoted: Optional[neonize_proto.Message], optional</span>
<span class="sd">        :param viewonce: Whether the image message should be viewable only once, defaults to False.</span>
<span class="sd">        :type viewonce: bool, optional</span>
<span class="sd">        :return: The constructed image message.</span>
<span class="sd">        :rtype: Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">n_file</span> <span class="o">=</span> <span class="n">get_bytes_from_name_or_url</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">n_file</span><span class="p">))</span>
        <span class="n">img</span><span class="o">.</span><span class="n">thumbnail</span><span class="p">(</span><span class="n">AspectRatioMethod</span><span class="p">(</span><span class="o">*</span><span class="n">img</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="n">res</span><span class="o">=</span><span class="mi">200</span><span class="p">))</span>
        <span class="n">thumbnail</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
        <span class="n">img_saveable</span> <span class="o">=</span> <span class="n">img</span> <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;RGB&quot;</span> <span class="k">else</span> <span class="n">img</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;RGB&quot;</span><span class="p">)</span>
        <span class="n">img_saveable</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;jpeg&quot;</span><span class="p">)</span>
        <span class="n">upload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">n_file</span><span class="p">)</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span>
            <span class="n">imageMessage</span><span class="o">=</span><span class="n">ImageMessage</span><span class="p">(</span>
                <span class="n">URL</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
                <span class="n">caption</span><span class="o">=</span><span class="n">caption</span><span class="p">,</span>
                <span class="n">directPath</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">DirectPath</span><span class="p">,</span>
                <span class="n">fileEncSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileEncSHA256</span><span class="p">,</span>
                <span class="n">fileLength</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileLength</span><span class="p">,</span>
                <span class="n">fileSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileSHA256</span><span class="p">,</span>
                <span class="n">mediaKey</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">MediaKey</span><span class="p">,</span>
                <span class="n">mimetype</span><span class="o">=</span><span class="n">magic</span><span class="o">.</span><span class="n">from_buffer</span><span class="p">(</span><span class="n">n_file</span><span class="p">,</span> <span class="n">mime</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                <span class="n">JPEGThumbnail</span><span class="o">=</span><span class="n">thumbnail</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(),</span>
                <span class="n">thumbnailDirectPath</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">DirectPath</span><span class="p">,</span>
                <span class="n">thumbnailEncSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileEncSHA256</span><span class="p">,</span>
                <span class="n">thumbnailSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileSHA256</span><span class="p">,</span>
                <span class="n">viewOnce</span><span class="o">=</span><span class="n">viewonce</span><span class="p">,</span>
                <span class="n">contextInfo</span><span class="o">=</span><span class="n">ContextInfo</span><span class="p">(</span>
                    <span class="n">mentionedJID</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parse_mention</span><span class="p">(</span><span class="n">caption</span><span class="p">),</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">quoted</span><span class="p">:</span>
            <span class="n">message</span><span class="o">.</span><span class="n">imageMessage</span><span class="o">.</span><span class="n">contextInfo</span><span class="o">.</span><span class="n">MergeFrom</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_make_quoted_message</span><span class="p">(</span><span class="n">quoted</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">message</span></div>


<div class="viewcode-block" id="NewClient.send_image">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.send_image">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_image</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">to</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">caption</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">viewonce</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SendResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sends an image to the specified recipient.</span>

<span class="sd">        :param to: The JID (Jabber Identifier) of the recipient.</span>
<span class="sd">        :type to: JID</span>
<span class="sd">        :param file: Either a file path (str), url (str) or binary data (bytes) representing the image.</span>
<span class="sd">        :type file: typing.Union[str | bytes]</span>
<span class="sd">        :param caption: Optional. The caption of the image. Defaults to None.</span>
<span class="sd">        :type caption: Optional[str], optional</span>
<span class="sd">        :param quoted: Optional. The message to which the image is a reply. Defaults to None.</span>
<span class="sd">        :type quoted: Optional[Message], optional</span>
<span class="sd">        :param viewonce: Optional. Whether the image should be viewonce. Defaults to False.</span>
<span class="sd">        :type viewonce: bool, optional</span>
<span class="sd">        :return: A function for handling the result of the image sending process.</span>
<span class="sd">        :rtype: SendResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
            <span class="n">to</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_image_message</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">caption</span><span class="p">,</span> <span class="n">quoted</span><span class="p">,</span> <span class="n">viewonce</span><span class="o">=</span><span class="n">viewonce</span><span class="p">)</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.build_audio_message">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.build_audio_message">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">build_audio_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">ptt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Message</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method builds an audio message from a given file or bytes.</span>

<span class="sd">        :param file: The audio file in string or bytes format to be converted into an audio message</span>
<span class="sd">        :type file: str | bytes</span>
<span class="sd">        :param ptt: A boolean indicating if the audio message is a &#39;push to talk&#39; message, defaults to False</span>
<span class="sd">        :type ptt: bool, optional</span>
<span class="sd">        :param quoted: A message that the audio message may be replying to, defaults to None</span>
<span class="sd">        :type quoted: Optional[neonize_proto.Message], optional</span>
<span class="sd">        :return: The audio message built from the given parameters</span>
<span class="sd">        :rtype: Message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">io</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">get_bytes_from_name_or_url</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
        <span class="n">io</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">buff</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">upload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">buff</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">FFmpeg</span><span class="p">(</span><span class="n">io</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span> <span class="k">as</span> <span class="n">ffmpeg</span><span class="p">:</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ffmpeg</span><span class="o">.</span><span class="n">extract_info</span><span class="p">()</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">duration</span><span class="p">)</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span>
            <span class="n">audioMessage</span><span class="o">=</span><span class="n">AudioMessage</span><span class="p">(</span>
                <span class="n">URL</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
                <span class="n">seconds</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span>
                <span class="n">directPath</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">DirectPath</span><span class="p">,</span>
                <span class="n">fileEncSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileEncSHA256</span><span class="p">,</span>
                <span class="n">fileLength</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileLength</span><span class="p">,</span>
                <span class="n">fileSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileSHA256</span><span class="p">,</span>
                <span class="n">mediaKey</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">MediaKey</span><span class="p">,</span>
                <span class="n">mimetype</span><span class="o">=</span><span class="n">magic</span><span class="o">.</span><span class="n">from_buffer</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="n">mime</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                <span class="n">PTT</span><span class="o">=</span><span class="n">ptt</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">quoted</span><span class="p">:</span>
            <span class="n">message</span><span class="o">.</span><span class="n">audioMessage</span><span class="o">.</span><span class="n">contextInfo</span><span class="o">.</span><span class="n">MergeFrom</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_make_quoted_message</span><span class="p">(</span><span class="n">quoted</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">message</span></div>


<div class="viewcode-block" id="NewClient.send_audio">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.send_audio">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_audio</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">to</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">ptt</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SendResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sends an audio to the specified recipient.</span>

<span class="sd">        :param to: The JID (Jabber Identifier) of the recipient.</span>
<span class="sd">        :type to: JID</span>
<span class="sd">        :param file: Either a file path (str), url (str) or binary data (bytes) representing the audio.</span>
<span class="sd">        :type file: typing.Union[str | bytes]</span>
<span class="sd">        :param ptt: Optional. Whether the audio should be ptt. Defaults to False.</span>
<span class="sd">        :type ptt: bool, optional</span>
<span class="sd">        :param quoted: Optional. The message to which the audio is a reply. Defaults to None.</span>
<span class="sd">        :type quoted: Optional[Message], optional</span>
<span class="sd">        :return: A function for handling the result of the audio sending process.</span>
<span class="sd">        :rtype: SendResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">to</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_audio_message</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">ptt</span><span class="p">,</span> <span class="n">quoted</span><span class="p">))</span></div>


<div class="viewcode-block" id="NewClient.build_document_message">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.build_document_message">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">build_document_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">caption</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mimetype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">io</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">get_bytes_from_name_or_url</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
        <span class="n">io</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">buff</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">upload</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">buff</span><span class="p">)</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span>
            <span class="n">documentMessage</span><span class="o">=</span><span class="n">DocumentMessage</span><span class="p">(</span>
                <span class="n">URL</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
                <span class="n">caption</span><span class="o">=</span><span class="n">caption</span><span class="p">,</span>
                <span class="n">directPath</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">DirectPath</span><span class="p">,</span>
                <span class="n">fileEncSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileEncSHA256</span><span class="p">,</span>
                <span class="n">fileLength</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileLength</span><span class="p">,</span>
                <span class="n">fileSHA256</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">FileSHA256</span><span class="p">,</span>
                <span class="n">mediaKey</span><span class="o">=</span><span class="n">upload</span><span class="o">.</span><span class="n">MediaKey</span><span class="p">,</span>
                <span class="n">mimetype</span><span class="o">=</span><span class="n">mimetype</span> <span class="ow">or</span> <span class="n">magic</span><span class="o">.</span><span class="n">from_buffer</span><span class="p">(</span><span class="n">buff</span><span class="p">,</span> <span class="n">mime</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
                <span class="n">fileName</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                <span class="n">contextInfo</span><span class="o">=</span><span class="n">ContextInfo</span><span class="p">(</span>
                    <span class="n">mentionedJID</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_parse_mention</span><span class="p">(</span><span class="n">caption</span><span class="p">),</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">quoted</span><span class="p">:</span>
            <span class="n">message</span><span class="o">.</span><span class="n">documentMessage</span><span class="o">.</span><span class="n">contextInfo</span><span class="o">.</span><span class="n">MergeFrom</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_make_quoted_message</span><span class="p">(</span><span class="n">quoted</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">message</span></div>


<div class="viewcode-block" id="NewClient.send_document">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.send_document">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_document</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">to</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">caption</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">filename</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mimetype</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SendResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sends a document to the specified recipient.</span>

<span class="sd">        :param to: The JID (Jabber Identifier) of the recipient.</span>
<span class="sd">        :type to: JID</span>
<span class="sd">        :param file: Either a file path (str), url (str) or binary data (bytes) representing the document.</span>
<span class="sd">        :type file: typing.Union[str | bytes]</span>
<span class="sd">        :param caption: Optional. The caption of the document. Defaults to None.</span>
<span class="sd">        :type caption: Optional[str], optional</span>
<span class="sd">        :param title: Optional. The title of the document. Defaults to None.</span>
<span class="sd">        :type title: Optional[str], optional</span>
<span class="sd">        :param filename: Optional. The filename of the document. Defaults to None.</span>
<span class="sd">        :type filename: Optional[str], optional</span>
<span class="sd">        :param quoted: Optional. The message to which the document is a reply. Defaults to None.</span>
<span class="sd">        :type quoted: Optional[Message], optional</span>
<span class="sd">        :return: A function for handling the result of the document sending process.</span>
<span class="sd">        :rtype: SendResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
            <span class="n">to</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">build_document_message</span><span class="p">(</span>
                <span class="n">file</span><span class="p">,</span> <span class="n">caption</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">mimetype</span><span class="p">,</span> <span class="n">quoted</span>
            <span class="p">),</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.send_contact">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.send_contact">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_contact</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">to</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span>
        <span class="n">contact_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">contact_number</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">quoted</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">neonize_proto</span><span class="o">.</span><span class="n">Message</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SendResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sends a contact to the specified recipient.</span>

<span class="sd">        :param to: The JID (Jabber Identifier) of the recipient.</span>
<span class="sd">        :type to: JID</span>
<span class="sd">        :param contact_name: The name of the contact.</span>
<span class="sd">        :type contact_name: str</span>
<span class="sd">        :param contact_number: The number of the contact.</span>
<span class="sd">        :type contact_number: str</span>
<span class="sd">        :param quoted: Optional. The message to which the contact is a reply. Defaults to None.</span>
<span class="sd">        :type quoted: Optional[Message], optional</span>
<span class="sd">        :return: A function for handling the result of the contact sending process.</span>
<span class="sd">        :rtype: SendResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span>
            <span class="n">contactMessage</span><span class="o">=</span><span class="n">ContactMessage</span><span class="p">(</span>
                <span class="n">displayName</span><span class="o">=</span><span class="n">contact_name</span><span class="p">,</span>
                <span class="n">vcard</span><span class="o">=</span><span class="n">gen_vcard</span><span class="p">(</span><span class="n">contact_name</span><span class="p">,</span> <span class="n">contact_number</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">quoted</span><span class="p">:</span>
            <span class="n">message</span><span class="o">.</span><span class="n">contactMessage</span><span class="o">.</span><span class="n">contextInfo</span><span class="o">.</span><span class="n">MergeFrom</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_make_quoted_message</span><span class="p">(</span><span class="n">quoted</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">to</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.upload">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.upload">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">upload</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">binary</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">media_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MediaType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UploadResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Uploads media content.</span>

<span class="sd">        :param binary: The binary data to be uploaded.</span>
<span class="sd">        :type binary: bytes</span>
<span class="sd">        :param media_type: Optional. The media type of the binary data, defaults to None.</span>
<span class="sd">        :type media_type: Optional[MediaType], optional</span>
<span class="sd">        :raises UploadError: Raised if there is an issue with the upload.</span>
<span class="sd">        :return: An UploadResponse containing information about the upload.</span>
<span class="sd">        :rtype: UploadResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">media_type</span><span class="p">:</span>
            <span class="n">mime</span> <span class="o">=</span> <span class="n">MediaType</span><span class="o">.</span><span class="n">from_magic</span><span class="p">(</span><span class="n">binary</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mime</span> <span class="o">=</span> <span class="n">media_type</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">Upload</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">binary</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">binary</span><span class="p">),</span> <span class="n">mime</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">upload_model</span> <span class="o">=</span> <span class="n">UploadReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">upload_model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UploadError</span><span class="p">(</span><span class="n">upload_model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">upload_model</span><span class="o">.</span><span class="n">UploadResponse</span></div>


    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">download_any</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span> <span class="o">...</span>

    <span class="nd">@overload</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">download_any</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoneType</span><span class="p">:</span> <span class="o">...</span>

<div class="viewcode-block" id="NewClient.download_any">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.download_any">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">download_any</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">:</span> <span class="n">Message</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Downloads content from a message.</span>

<span class="sd">        :param message: The message containing the content to download.</span>
<span class="sd">        :type message: Message</span>
<span class="sd">        :param path: Optional. The local path to save the downloaded content, defaults to None.</span>
<span class="sd">        :type path: Optional[str], optional</span>
<span class="sd">        :raises DownloadException: Raised if there is an issue with the download.</span>
<span class="sd">        :return: The downloaded content as bytes, or None if the content is not available.</span>
<span class="sd">        :rtype: Union[None, bytes]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg_protobuf</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">media_buff</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">DownloadAny</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">msg_protobuf</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">msg_protobuf</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="n">media</span> <span class="o">=</span> <span class="n">DownloadReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="n">media_buff</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">media</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DownloadError</span><span class="p">(</span><span class="n">media</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
                <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">media</span><span class="o">.</span><span class="n">Binary</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">media</span><span class="o">.</span><span class="n">Binary</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="NewClient.download_media_with_path">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.download_media_with_path">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">download_media_with_path</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">direct_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">enc_file_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">file_hash</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">media_key</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
        <span class="n">file_length</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">media_type</span><span class="p">:</span> <span class="n">MediaType</span><span class="p">,</span>
        <span class="n">mms_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bytes</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Downloads media with the given parameters and path. The media is downloaded from the path specified.</span>

<span class="sd">        :param direct_path: The direct path to the media to be downloaded.</span>
<span class="sd">        :type direct_path: str</span>
<span class="sd">        :param enc_file_hash: The encrypted hash of the file.</span>
<span class="sd">        :type enc_file_hash: bytes</span>
<span class="sd">        :param file_hash: The hash of the file.</span>
<span class="sd">        :type file_hash: bytes</span>
<span class="sd">        :param media_key: The key of the media to be downloaded.</span>
<span class="sd">        :type media_key: bytes</span>
<span class="sd">        :param file_length: The length of the file to be downloaded.</span>
<span class="sd">        :type file_length: int</span>
<span class="sd">        :param media_type: The type of the media to be downloaded.</span>
<span class="sd">        :type media_type: MediaType</span>
<span class="sd">        :param mms_type: The type of the MMS to be downloaded.</span>
<span class="sd">        :type mms_type: str</span>
<span class="sd">        :raises DownloadError: If there is an error in the download process.</span>
<span class="sd">        :return: The downloaded media in bytes.</span>
<span class="sd">        :rtype: bytes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">DownloadReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">DownloadMediaWithPath</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
                <span class="n">direct_path</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
                <span class="n">enc_file_hash</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">enc_file_hash</span><span class="p">),</span>
                <span class="n">file_hash</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">file_hash</span><span class="p">),</span>
                <span class="n">media_key</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">media_key</span><span class="p">),</span>
                <span class="n">file_length</span><span class="p">,</span>
                <span class="n">media_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="n">mms_type</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">DownloadError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Binary</span></div>


<div class="viewcode-block" id="NewClient.generate_message_id">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.generate_message_id">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">generate_message_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates a unique identifier for a message.</span>

<span class="sd">        :return: A string representing the unique identifier for the message.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GenerateMessageID</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span></div>


<div class="viewcode-block" id="NewClient.send_chat_presence">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.send_chat_presence">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_chat_presence</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">ChatPresence</span><span class="p">,</span> <span class="n">media</span><span class="p">:</span> <span class="n">ChatPresenceMedia</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sends chat presence information.</span>

<span class="sd">        :param jid: The JID (Jabber Identifier) of the chat.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param state: The chat presence state.</span>
<span class="sd">        :type state: ChatPresence</span>
<span class="sd">        :param media: The chat presence media information.</span>
<span class="sd">        :type media: ChatPresenceMedia</span>
<span class="sd">        :return: A string indicating the result or status of the presence information sending.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jidbyte</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SendChatPresence</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jidbyte</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jidbyte</span><span class="p">),</span> <span class="n">state</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">media</span><span class="o">.</span><span class="n">value</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span></div>


<div class="viewcode-block" id="NewClient.is_on_whatsapp">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.is_on_whatsapp">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_on_whatsapp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">numbers</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">IsOnWhatsAppResponse</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function checks if the provided phone numbers are registered with WhatsApp.</span>

<span class="sd">        :param numbers: A series of phone numbers to be checked.</span>
<span class="sd">        :type numbers: str</span>
<span class="sd">        :raises IsOnWhatsAppError: If an error occurs while verifying the phone numbers.</span>
<span class="sd">        :return: A list of responses, each indicating whether the corresponding number is registered with WhatsApp.</span>
<span class="sd">        :rtype: Sequence[IsOnWhatsAppResponse]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">numbers</span><span class="p">:</span>
            <span class="n">numbers_buf</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">IsOnWhatsApp</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">numbers_buf</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">numbers_buf</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
            <span class="n">model</span> <span class="o">=</span> <span class="n">IsOnWhatsAppReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">IsOnWhatsAppError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">IsOnWhatsAppResponse</span>
        <span class="k">return</span> <span class="p">[]</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_connected</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the object is currently connected.</span>

<span class="sd">        :return: True if the object is connected, False otherwise.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">IsConnected</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_logged_in</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if the user is currently logged in.</span>

<span class="sd">        :return: True if the user is logged in, False otherwise.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">IsLoggedIn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>

<div class="viewcode-block" id="NewClient.get_user_info">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_user_info">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_user_info</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">jid</span><span class="p">:</span> <span class="n">JID</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RepeatedCompositeFieldContainer</span><span class="p">[</span><span class="n">GetUserInfoSingleReturnFunction</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function retrieves user information given a set of JID. It serializes the JID into a string,</span>
<span class="sd">        gets the user information from the client, deserializes the returned information, checks for any errors,</span>
<span class="sd">        and finally returns the user information.</span>

<span class="sd">        :param jid: JID of the users to retrieve information from</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :raises GetUserInfoError: If there is an error in the model returned by the client</span>
<span class="sd">        :return: The user information for each JID</span>
<span class="sd">        :rtype: RepeatedCompositeFieldContainer[GetUserInfoSingleReturnFunction]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jidbuf</span> <span class="o">=</span> <span class="n">JIDArray</span><span class="p">(</span><span class="n">JIDS</span><span class="o">=</span><span class="n">jid</span><span class="p">)</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">getUser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetUserInfo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jidbuf</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jidbuf</span><span class="p">))</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">GetUserInfoReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="n">getUser</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetUserInfoError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">UsersInfo</span></div>


<div class="viewcode-block" id="NewClient.get_group_info">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_group_info">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_group_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GroupInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves information about a group.</span>

<span class="sd">        :param jid: The JID (Jabber Identifier) of the group.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :raises GetGroupInfoError: Raised if there is an issue retrieving group information.</span>
<span class="sd">        :return: Information about the specified group.</span>
<span class="sd">        :rtype: GroupInfo</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jidbuf</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">group_info_buf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetGroupInfo</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
            <span class="n">jidbuf</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">jidbuf</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">GetGroupInfoReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="n">group_info_buf</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetGroupInfoError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">GroupInfo</span></div>


<div class="viewcode-block" id="NewClient.get_group_info_from_link">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_group_info_from_link">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_group_info_from_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GroupInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves group information from a given link.</span>

<span class="sd">        :param code: The link code.</span>
<span class="sd">        :type code: str</span>
<span class="sd">        :return: An object containing the group information.</span>
<span class="sd">        :rtype: GroupInfo</span>
<span class="sd">        :raises GetGroupInfoError: If there is an error retrieving the group information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">GetGroupInfoReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetGroupInfoFromLink</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">code</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetGroupInfoError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">GroupInfo</span></div>


<div class="viewcode-block" id="NewClient.get_group_info_from_invite">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_group_info_from_invite">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_group_info_from_invite</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">inviter</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">expiration</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GroupInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves group information from an invite.</span>

<span class="sd">        :param jid: The JID (Jabber ID) of the group.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param inviter: The JID of the user who sent the invite.</span>
<span class="sd">        :type inviter: JID</span>
<span class="sd">        :param code: The invite code.</span>
<span class="sd">        :type code: str</span>
<span class="sd">        :param expiration: The expiration time of the invite.</span>
<span class="sd">        :type expiration: int</span>

<span class="sd">        :return: The group information.</span>
<span class="sd">        :rtype: GroupInfo</span>

<span class="sd">        :raises GetGroupInfoError: If there is an error retrieving the group information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jidbyte</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">inviterbyte</span> <span class="o">=</span> <span class="n">inviter</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">GetGroupInfoReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetGroupInfoFromInvite</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
                <span class="n">jidbyte</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">jidbyte</span><span class="p">),</span>
                <span class="n">inviterbyte</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">inviterbyte</span><span class="p">),</span>
                <span class="n">code</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
                <span class="n">expiration</span><span class="p">,</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetGroupInfoError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">GroupInfo</span></div>


<div class="viewcode-block" id="NewClient.set_group_name">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.set_group_name">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_group_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the name of a group.</span>

<span class="sd">        :param jid: The JID (Jabber Identifier) of the group.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param name: The new name to be set for the group.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :return: A string indicating the result or an error status. Empty string if successful.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jidbuf</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SetGroupName</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jidbuf</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jidbuf</span><span class="p">),</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">create_string_buffer</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span></div>


<div class="viewcode-block" id="NewClient.set_group_photo">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.set_group_photo">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_group_photo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">file_or_bytes</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the photo of a group.</span>

<span class="sd">        :param jid: The JID (Jabber Identifier) of the group.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param file_or_bytes: Either a file path (str) or binary data (bytes) representing the group photo.</span>
<span class="sd">        :type file_or_bytes: typing.Union[str, bytes]</span>
<span class="sd">        :raises SetGroupPhotoError: Raised if there is an issue setting the group photo.</span>
<span class="sd">        :return: A string indicating the result or an error status.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">get_bytes_from_name_or_url</span><span class="p">(</span><span class="n">file_or_bytes</span><span class="p">)</span>
        <span class="n">jid_buf</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SetGroupPhoto</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid_buf</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid_buf</span><span class="p">),</span> <span class="n">data</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">SetGroupPhotoReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SetGroupPhotoError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">PictureID</span></div>


<div class="viewcode-block" id="NewClient.leave_group">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.leave_group">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">leave_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Leaves a group.</span>

<span class="sd">        :param jid: The JID (Jabber Identifier) of the target group.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :return: A string indicating the result or an error status. Empty string if successful.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid_buf</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">LeaveGroup</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid_buf</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid_buf</span><span class="p">))</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span></div>


<div class="viewcode-block" id="NewClient.get_group_invite_link">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_group_invite_link">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_group_invite_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">revoke</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets or revokes the invite link for a group.</span>

<span class="sd">        :param jid: The JID (Jabber Identifier) of the group.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param revoke: Optional. If True, revokes the existing invite link; if False, gets the invite link. Defaults to False.</span>
<span class="sd">        :type revoke: bool, optional</span>
<span class="sd">        :raises GetGroupInviteLinkError: Raised if there is an issue getting or revoking the invite link.</span>
<span class="sd">        :return: The group invite link or an error status.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid_buf</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetGroupInviteLink</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid_buf</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid_buf</span><span class="p">),</span> <span class="n">revoke</span>
        <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">GetGroupInviteLinkReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetGroupInviteLinkError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">InviteLink</span></div>


<div class="viewcode-block" id="NewClient.join_group_with_link">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.join_group_with_link">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">join_group_with_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JID</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Join a group using an invite link.</span>

<span class="sd">        :param code: The invite code or link for joining the group.</span>
<span class="sd">        :type code: str</span>
<span class="sd">        :raises InviteLinkError: Raised if the group membership is pending approval or if the link is invalid.</span>
<span class="sd">        :return: The JID (Jabber Identifier) of the joined group.</span>
<span class="sd">        :rtype: JID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">JoinGroupWithLink</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">code</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">JoinGroupWithLinkReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InviteLinkError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Jid</span></div>


<div class="viewcode-block" id="NewClient.join_group_with_invite">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.join_group_with_invite">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">join_group_with_invite</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">inviter</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">expiration</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function allows a user to join a group in a chat application using an invite.</span>
<span class="sd">        It uses the JID (Jabber ID) of the group, the JID of the inviter, an invitation code, and an expiration time for the code.</span>

<span class="sd">        :param jid: The JID of the group to join.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param inviter: The JID of the person who sent the invite.</span>
<span class="sd">        :type inviter: JID</span>
<span class="sd">        :param code: The invitation code.</span>
<span class="sd">        :type code: str</span>
<span class="sd">        :param expiration: The expiration time of the invitation code in seconds.</span>
<span class="sd">        :type expiration: int</span>
<span class="sd">        :raises JoinGroupWithInviteError: If there is an error in joining the group, such as an invalid code or expired invitation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jidbytes</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">inviterbytes</span> <span class="o">=</span> <span class="n">inviter</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">JoinGroupWithInvite</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
            <span class="n">jidbytes</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">jidbytes</span><span class="p">),</span>
            <span class="n">inviterbytes</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">inviterbytes</span><span class="p">),</span>
            <span class="n">code</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
            <span class="n">expiration</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">JoinGroupWithInviteError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.link_group">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.link_group">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">link_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">child</span><span class="p">:</span> <span class="n">JID</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Links a child group to a parent group.</span>

<span class="sd">        :param parent: The JID of the parent group</span>
<span class="sd">        :type parent: JID</span>
<span class="sd">        :param child: The JID of the child group</span>
<span class="sd">        :type child: JID</span>
<span class="sd">        :raises LinkGroupError: If there is an error while linking the groups</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parent_bytes</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">child_bytes</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">LinkGroup</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">parent_bytes</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_bytes</span><span class="p">),</span> <span class="n">child_bytes</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">child_bytes</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">LinkGroupError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.logout">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.logout">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">logout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">Logout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">LogoutError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.mark_read">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.mark_read">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">mark_read</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="o">*</span><span class="n">message_ids</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">chat</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span>
        <span class="n">sender</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span>
        <span class="n">receipt</span><span class="p">:</span> <span class="n">ReceiptType</span><span class="p">,</span>
        <span class="n">timestamp</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Marks the specified messages as read.</span>

<span class="sd">        :param message_ids: Identifiers of the messages to mark as read.</span>
<span class="sd">        :type message_ids: str</span>
<span class="sd">        :param chat: The JID of the chat.</span>
<span class="sd">        :type chat: JID</span>
<span class="sd">        :param sender: The JID of the sender.</span>
<span class="sd">        :type sender: JID</span>
<span class="sd">        :param receipt: The type of receipt indicating the message status.</span>
<span class="sd">        :type receipt: ReceiptType</span>
<span class="sd">        :param timestamp: The timestamp of the read action, defaults to None.</span>
<span class="sd">        :type timestamp: Optional[int], optional</span>
<span class="sd">        :raises MarkReadError: If there is an error marking messages as read.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">chat_proto</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">sender_proto</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">timestamp_args</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span> <span class="k">if</span> <span class="n">timestamp</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">timestamp</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">MarkRead</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
            <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">message_ids</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
            <span class="n">timestamp_args</span><span class="p">,</span>
            <span class="n">chat_proto</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">chat_proto</span><span class="p">),</span>
            <span class="n">sender_proto</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">sender_proto</span><span class="p">),</span>
            <span class="n">receipt</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">MarkReadError</span><span class="p">(</span><span class="n">err</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span></div>


<div class="viewcode-block" id="NewClient.newsletter_mark_viewed">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.newsletter_mark_viewed">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">newsletter_mark_viewed</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">message_server_ids</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">MessageServerID</span><span class="p">]</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Marks the specified newsletters as viewed by the user with the given JID.</span>

<span class="sd">        :param jid: The JID (Jabber ID) of the user who has viewed the newsletters.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param message_server_ids: List of server IDs of the newsletters that have been viewed.</span>
<span class="sd">        :type message_server_ids: List[MessageServerID]</span>
<span class="sd">        :raises NewsletterMarkViewedError: If an error occurs while marking the newsletters as viewed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">servers</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">message_server_ids</span><span class="p">)</span><span class="si">}</span><span class="s2">b&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">message_server_ids</span><span class="p">)</span>
        <span class="n">jid_proto</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">NewsletterMarkViewed</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid_proto</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid_proto</span><span class="p">),</span> <span class="n">servers</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">servers</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NewsletterMarkViewedError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.newsletter_send_reaction">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.newsletter_send_reaction">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">newsletter_send_reaction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span>
        <span class="n">message_server_id</span><span class="p">:</span> <span class="n">MessageServerID</span><span class="p">,</span>
        <span class="n">reaction</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sends a reaction to a newsletter.</span>

<span class="sd">        :param jid: The unique identifier for the recipient of the newsletter.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param message_server_id: The unique identifier for the server where the message is stored.</span>
<span class="sd">        :type message_server_id: MessageServerID</span>
<span class="sd">        :param reaction: The reaction to be sent.</span>
<span class="sd">        :type reaction: str</span>
<span class="sd">        :param message_id: The unique identifier for the message to which the reaction is being sent.</span>
<span class="sd">        :type message_id: str</span>
<span class="sd">        :raises NewsletterSendReactionError: If an error occurs while sending the reaction.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid_proto</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">NewsletterSendReaction</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
            <span class="n">jid_proto</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">jid_proto</span><span class="p">),</span>
            <span class="n">message_server_id</span><span class="p">,</span>
            <span class="n">reaction</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
            <span class="n">message_id</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NewsletterSendReactionError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="NewClient.newsletter_subscribe_live_updates">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.newsletter_subscribe_live_updates">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">newsletter_subscribe_live_updates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Subscribes a user to live updates of a newsletter.</span>

<span class="sd">        :param jid: The unique identifier of the user subscribing to the newsletter.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :raises NewsletterSubscribeLiveUpdatesError: If there is an error during the subscription process.</span>
<span class="sd">        :return: The duration for which the subscription is valid.</span>
<span class="sd">        :rtype: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid_proto</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">NewsletterSubscribeLiveUpdatesReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">NewsletterSubscribeLiveUpdates</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid_proto</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid_proto</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NewsletterSubscribeLiveUpdatesError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Duration</span></div>


<div class="viewcode-block" id="NewClient.newsletter_toggle_mute">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.newsletter_toggle_mute">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">newsletter_toggle_mute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">mute</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Toggle the mute status of a given JID.</span>

<span class="sd">        :param jid: The JID (Jabber Identifier) of the user.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param mute: The desired mute status. If True, the user will be muted. If False, the user will be unmuted.</span>
<span class="sd">        :type mute: bool</span>
<span class="sd">        :raises NewsletterToggleMuteError: If there is an error while toggling the mute status.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid_proto</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">NewsletterToggleMute</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid_proto</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid_proto</span><span class="p">),</span> <span class="n">mute</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NewsletterToggleMuteError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.resolve_business_message_link">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.resolve_business_message_link">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_business_message_link</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">BusinessMessageLinkTarget</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resolves the target of a business message link.</span>

<span class="sd">        :param code: The code of the business message link to be resolved.</span>
<span class="sd">        :type code: str</span>
<span class="sd">        :raises ResolveContactQRLinkError: If an error occurs while resolving the link.</span>
<span class="sd">        :return: The target of the business message link.</span>
<span class="sd">        :rtype: neonize_proto.BusinessMessageLinkTarget</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">ResolveBusinessMessageLinkReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">ResolveBusinessMessageLink</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">code</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ResolveContactQRLinkError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">MessageLinkTarget</span></div>


<div class="viewcode-block" id="NewClient.resolve_contact_qr_link">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.resolve_contact_qr_link">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">resolve_contact_qr_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">ContactQRLinkTarget</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resolves a QR link for a specific contact.</span>

<span class="sd">        :param code: The QR code to be resolved.</span>
<span class="sd">        :type code: str</span>
<span class="sd">        :raises ResolveContactQRLinkError: If an error occurs while resolving the QR link.</span>
<span class="sd">        :return: The target contact of the QR link.</span>
<span class="sd">        :rtype: neonize_proto.ContactQRLinkTarget</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">ResolveContactQRLinkReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">ResolveContactQRLink</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">code</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ResolveContactQRLinkError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">ContactQrLink</span></div>


<div class="viewcode-block" id="NewClient.send_app_state">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.send_app_state">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_app_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">patch_info</span><span class="p">:</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">PatchInfo</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function serializes the application state and sends it to the client. If there&#39;s an error during this process,</span>
<span class="sd">        it raises a SendAppStateError exception.</span>

<span class="sd">        :param patch_info: Contains the information about the application state that needs to be patched.</span>
<span class="sd">        :type patch_info: neonize_proto.PatchInfo</span>
<span class="sd">        :raises SendAppStateError: If there&#39;s an error while sending the application state, this exception is raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">patch</span> <span class="o">=</span> <span class="n">patch_info</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SendAppState</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">patch</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">patch</span><span class="p">))</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SendAppStateError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.set_default_disappearing_timer">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.set_default_disappearing_timer">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_default_disappearing_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timer</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">timedelta</span><span class="p">,</span> <span class="nb">int</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets a default disappearing timer for messages. The timer can be specified as a timedelta or an integer.</span>
<span class="sd">        If a timedelta is provided, it is converted to nanoseconds. If an integer is provided, it is used directly as the timer.</span>

<span class="sd">        :param timer: The duration for messages to exist before disappearing. Can be a timedelta or an integer.</span>
<span class="sd">        :type timer: typing.Union[timedelta, int]</span>
<span class="sd">        :raises SetDefaultDisappearingTimerError: If an error occurs while setting the disappearing timer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">timer</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">):</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">timer</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">timer</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SetDefaultDisappearingTimer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SetDefaultDisappearingTimerError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.set_disappearing_timer">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.set_disappearing_timer">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_disappearing_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">timer</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">timedelta</span><span class="p">,</span> <span class="nb">int</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set a disappearing timer for a specific JID. The timer can be set as either a timedelta object or an integer.</span>
<span class="sd">        If a timedelta object is provided, it&#39;s converted into nanoseconds. If an integer is provided, it&#39;s interpreted as nanoseconds.</span>

<span class="sd">        :param jid: The JID for which the disappearing timer is to be set</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param timer: The duration for the disappearing timer. Can be a timedelta object or an integer representing nanoseconds.</span>
<span class="sd">        :type timer: typing.Union[timedelta, int]</span>
<span class="sd">        :raises SetDisappearingTimerError: If there is an error in setting the disappearing timer</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">jid_proto</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">timer</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">):</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">timer</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">timer</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SetDisappearingTimer</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid_proto</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid_proto</span><span class="p">),</span> <span class="n">timestamp</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SetDisappearingTimerError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.set_force_activate_delivery_receipts">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.set_force_activate_delivery_receipts">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_force_activate_delivery_receipts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">active</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is used to forcibly activate or deactivate the delivery receipts for a client.</span>

<span class="sd">        :param active: This parameter determines whether the delivery receipts should be forcibly activated or deactivated. If it&#39;s True, the delivery receipts will be forcibly activated, otherwise, they will be deactivated.</span>
<span class="sd">        :type active: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SetForceActiveDeliveryReceipts</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">active</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.set_group_announce">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.set_group_announce">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_group_announce</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">announce</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the announcement status of a group.</span>

<span class="sd">        :param jid: The unique identifier of the group</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param announce: The announcement status to be set. If True, announcements are enabled. If False, they are disabled.</span>
<span class="sd">        :type announce: bool</span>
<span class="sd">        :raises SetGroupAnnounceError: If there is an error while setting the announcement status</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid_proto</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SetGroupAnnounce</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid_proto</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid_proto</span><span class="p">),</span> <span class="n">announce</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SetGroupAnnounceError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.set_group_locked">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.set_group_locked">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_group_locked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">locked</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the locked status of a group identified by the given JID.</span>

<span class="sd">        :param jid: The JID (Jabber ID) of the group to be locked/unlocked.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param locked: The new locked status of the group. True to lock the group, False to unlock.</span>
<span class="sd">        :type locked: bool</span>
<span class="sd">        :raises SetGroupLockedError: If the operation fails, an error with the reason for the failure is raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid_proto</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SetGroupLocked</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid_proto</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid_proto</span><span class="p">),</span> <span class="n">locked</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SetGroupLockedError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.set_group_topic">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.set_group_topic">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_group_topic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">previous_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">new_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">topic</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the topic of a group in a chat application.</span>

<span class="sd">        :param jid: The unique identifier of the group</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param previous_id: The previous identifier of the topic</span>
<span class="sd">        :type previous_id: str</span>
<span class="sd">        :param new_id: The new identifier for the topic</span>
<span class="sd">        :type new_id: str</span>
<span class="sd">        :param topic: The new topic to be set</span>
<span class="sd">        :type topic: str</span>
<span class="sd">        :raises SetGroupTopicError: If there is an error setting the group topic</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid_proto</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SetGroupTopic</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
            <span class="n">jid_proto</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">jid_proto</span><span class="p">),</span>
            <span class="n">previous_id</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
            <span class="n">new_id</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
            <span class="n">topic</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SetGroupTopicError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.set_privacy_setting">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.set_privacy_setting">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_privacy_setting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">PrivacySettingType</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">PrivacySetting</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is used to set the privacy settings of a user.</span>

<span class="sd">        :param name: The name of the privacy setting to be changed.</span>
<span class="sd">        :type name: PrivacySettingType</span>
<span class="sd">        :param value: The new value for the privacy setting.</span>
<span class="sd">        :type value: PrivacySetting</span>
<span class="sd">        :raises SetPrivacySettingError: If there is an error while setting the privacy setting.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SetPrivacySetting</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">name</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SetPrivacySettingError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.set_passive">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.set_passive">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_passive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">passive</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the passive mode of the client.</span>

<span class="sd">        :param passive: If True, sets the client to passive mode. If False, sets the client to active mode.</span>
<span class="sd">        :type passive: bool</span>
<span class="sd">        :raises SetPassiveError: If an error occurs while setting the client to passive mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SetPassive</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">passive</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SetPassiveError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.set_status_message">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.set_status_message">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_status_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets a status message for a client using the client&#39;s UUID.</span>

<span class="sd">        :param msg: The status message to be set.</span>
<span class="sd">        :type msg: str</span>
<span class="sd">        :raises SetStatusMessageError: If there is an error while setting the status message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SetStatusMessage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">msg</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SetStatusMessageError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.subscribe_presence">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.subscribe_presence">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">subscribe_presence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is used to subscribe to the presence of a certain JID (Jabber ID).</span>

<span class="sd">        :param jid: The Jabber ID (JID) that we want to subscribe to.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :raises SubscribePresenceError: If there is an error while subscribing to the presence of the JID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid_proto</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SubscribePresence</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid_proto</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid_proto</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SubscribePresenceError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.unfollow_newsletter">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.unfollow_newsletter">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">unfollow_newsletter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Unfollows a newsletter by providing the JID (Jabber ID) of the newsletter.</span>

<span class="sd">        :param jid: The Jabber ID of the newsletter to unfollow.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :raises UnfollowNewsletterError: If there is an error while attempting to unfollow the newsletter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid_proto</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">UnfollowNewsletter</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid_proto</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid_proto</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UnfollowNewsletterError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.unlink_group">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.unlink_group">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">unlink_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">child</span><span class="p">:</span> <span class="n">JID</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is used to unlink a child group from a parent group.</span>

<span class="sd">        :param parent: The JID of the parent group from which the child group is to be unlinked.</span>
<span class="sd">        :type parent: JID</span>
<span class="sd">        :param child: The JID of the child group which is to be unlinked from the parent group.</span>
<span class="sd">        :type child: JID</span>
<span class="sd">        :raises UnlinkGroupError: If there is an error while unlinking the child group from the parent group.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parent_proto</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">child_proto</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">UnlinkGroup</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">parent_proto</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent_proto</span><span class="p">),</span> <span class="n">child_proto</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">child_proto</span><span class="p">)</span>
        <span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UnlinkGroupError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.update_blocklist">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.update_blocklist">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_blocklist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">BlocklistAction</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Blocklist</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function to update the blocklist with a given action on a specific JID.</span>

<span class="sd">        :param jid: The Jabber ID (JID) of the user to be blocked or unblocked.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param action: The action to be performed (block or unblock) on the JID.</span>
<span class="sd">        :type action: BlocklistAction</span>
<span class="sd">        :raises UpdateBlocklistError: If there is an error while updating the blocklist.</span>
<span class="sd">        :return: The updated blocklist.</span>
<span class="sd">        :rtype: Blocklist</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid_proto</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetBlocklistReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">UpdateBlocklist</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid_proto</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid_proto</span><span class="p">),</span> <span class="n">action</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UpdateBlocklistError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Blocklist</span></div>


<div class="viewcode-block" id="NewClient.update_group_participants">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.update_group_participants">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">update_group_participants</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">participants_changes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">JID</span><span class="p">],</span> <span class="n">action</span><span class="p">:</span> <span class="n">ParticipantChange</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RepeatedCompositeFieldContainer</span><span class="p">[</span><span class="n">GroupParticipant</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is used to update the list of participants in a group.</span>
<span class="sd">        It takes in the group&#39;s JID, a list of participant changes, and an action to perform.</span>

<span class="sd">        :param jid: The JID (Jabber ID) of the group to update.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param participants_changes: A list of JIDs representing the participants to be added or removed.</span>
<span class="sd">        :type participants_changes: List[JID]</span>
<span class="sd">        :param action: The action to perform (add, remove, promote or demote participants).</span>
<span class="sd">        :type action: ParticipantChange</span>
<span class="sd">        :raises UpdateGroupParticipantsError: This error is raised if there is a problem updating the group participants.</span>
<span class="sd">        :return: A list of the updated group participants.</span>
<span class="sd">        :rtype: RepeatedCompositeFieldContainer[GroupParticipant]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid_proto</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">jids_proto</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">JIDArray</span><span class="p">(</span>
            <span class="n">JIDS</span><span class="o">=</span><span class="n">participants_changes</span>
        <span class="p">)</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">UpdateGroupParticipantsReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">UpdateGroupParticipants</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
                <span class="n">jid_proto</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">jid_proto</span><span class="p">),</span>
                <span class="n">jids_proto</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">jids_proto</span><span class="p">),</span>
                <span class="n">action</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UpdateGroupParticipantsError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">participants</span></div>


<div class="viewcode-block" id="NewClient.upload_newsletter">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.upload_newsletter">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">upload_newsletter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">media_type</span><span class="p">:</span> <span class="n">MediaType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">UploadResponse</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Uploads the newsletter to the server.</span>

<span class="sd">        :param data: The newsletter content in bytes.</span>
<span class="sd">        :type data: bytes</span>
<span class="sd">        :param media_type: The type of media being uploaded.</span>
<span class="sd">        :type media_type: MediaType</span>
<span class="sd">        :raises UploadError: If there is an error during the upload process.</span>
<span class="sd">        :return: The response from the server after the upload.</span>
<span class="sd">        :rtype: UploadResponse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">UploadReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">UploadNewsletter</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">media_type</span><span class="o">.</span><span class="n">value</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UploadError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">UploadResponse</span></div>


<div class="viewcode-block" id="NewClient.create_group">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.create_group">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_group</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">participants</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">JID</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
        <span class="n">linked_parent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">GroupLinkedParent</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">group_parent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">GroupParent</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">GroupInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a new group.</span>

<span class="sd">        :param name: The name of the new group.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :param participants: Optional. A list of participant JIDs (Jabber Identifiers) to be included in the group. Defaults to an empty list.</span>
<span class="sd">        :type participants: List[JID], optional</span>
<span class="sd">        :param linked_parent: Optional. Information about a linked parent group, if applicable. Defaults to None.</span>
<span class="sd">        :type linked_parent: Optional[GroupLinkedParent], optional</span>
<span class="sd">        :param group_parent: Optional. Information about a parent group, if applicable. Defaults to None.</span>
<span class="sd">        :type group_parent: Optional[GroupParent], optional</span>
<span class="sd">        :return: Information about the newly created group.</span>
<span class="sd">        :rtype: GroupInfo</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">group_info</span> <span class="o">=</span> <span class="n">ReqCreateGroup</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">Participants</span><span class="o">=</span><span class="n">participants</span><span class="p">,</span> <span class="n">CreateKey</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">generate_message_id</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">linked_parent</span><span class="p">:</span>
            <span class="n">group_info</span><span class="o">.</span><span class="n">GroupLinkedParent</span><span class="o">.</span><span class="n">MergeFrom</span><span class="p">(</span><span class="n">linked_parent</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">group_parent</span><span class="p">:</span>
            <span class="n">group_info</span><span class="o">.</span><span class="n">GroupParent</span><span class="o">.</span><span class="n">MergeFrom</span><span class="p">(</span><span class="n">group_parent</span><span class="p">)</span>
        <span class="n">group_info_buf</span> <span class="o">=</span> <span class="n">group_info</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">CreateGroup</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">group_info_buf</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">group_info_buf</span><span class="p">))</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">GetGroupInfoReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CreateGroupError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">GroupInfo</span></div>


<div class="viewcode-block" id="NewClient.get_group_request_participants">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_group_request_participants">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_group_request_participants</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RepeatedCompositeFieldContainer</span><span class="p">[</span><span class="n">JID</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the participants of a group request.</span>

<span class="sd">        :param jid: The JID of the group request.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :return: A list of JIDs representing the participants of the group request.</span>
<span class="sd">        :rtype: RepeatedCompositeFieldContainer[JID]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jidbyte</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetGroupRequestParticipantsReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetGroupRequestParticipants</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jidbyte</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jidbyte</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetGroupRequestParticipantsError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Participants</span></div>


<div class="viewcode-block" id="NewClient.get_joined_groups">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_joined_groups">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_joined_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RepeatedCompositeFieldContainer</span><span class="p">[</span><span class="n">GroupInfo</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the joined groups for the current user.</span>

<span class="sd">        :return: A list of :class:`GroupInfo` objects representing the joined groups.</span>
<span class="sd">        :rtype: RepeatedCompositeFieldContainer[GroupInfo]</span>

<span class="sd">        :raises GetJoinedGroupsError: If there was an error retrieving the joined groups.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetJoinedGroupsReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetJoinedGroups</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetJoinedGroupsError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Group</span></div>


<div class="viewcode-block" id="NewClient.create_newsletter">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.create_newsletter">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_newsletter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">picture</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NewsletterMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a newsletter with the given name, description, and picture.</span>

<span class="sd">        :param name: The name of the newsletter.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :param description: The description of the newsletter.</span>
<span class="sd">        :type description: str</span>
<span class="sd">        :param picture: The picture of the newsletter. It can be either a URL or bytes.</span>
<span class="sd">        :type picture: Union[str, bytes]</span>
<span class="sd">        :return: The metadata of the created newsletter.</span>
<span class="sd">        :rtype: NewsletterMetadata</span>
<span class="sd">        :raises CreateNewsletterError: If there is an error creating the newsletter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">protobuf</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">CreateNewsletterParams</span><span class="p">(</span>
            <span class="n">Name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">Description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span>
            <span class="n">Picture</span><span class="o">=</span><span class="n">get_bytes_from_name_or_url</span><span class="p">(</span><span class="n">picture</span><span class="p">),</span>
        <span class="p">)</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">CreateNewsLetterReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">CreateNewsletter</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">protobuf</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">protobuf</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">CreateNewsletterError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">NewsletterMetadata</span></div>


<div class="viewcode-block" id="NewClient.follow_newsletter">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.follow_newsletter">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">follow_newsletter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Follows a newsletter with the given JID.</span>

<span class="sd">        :param jid: The JID of the newsletter to follow.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :return: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        :raises FollowNewsletterError: If there is an error following the newsletter.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">jidbyte</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">FollowNewsletter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jidbyte</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jidbyte</span><span class="p">))</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">err</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">FollowNewsletterError</span><span class="p">(</span><span class="n">err</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.get_newsletter_info_with_invite">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_newsletter_info_with_invite">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_newsletter_info_with_invite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NewsletterMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves the newsletter information with an invite using the provided key.</span>

<span class="sd">        :param key: The key used to identify the newsletter.</span>
<span class="sd">        :type key: str</span>
<span class="sd">        :return: The newsletter metadata.</span>
<span class="sd">        :rtype: NewsletterMetadata</span>
<span class="sd">        :raises GetNewsletterInfoWithInviteError: If there is an error retrieving the newsletter information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">CreateNewsLetterReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetNewsletterInfoWithInvite</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetNewsletterInfoWithInviteError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">NewsletterMetadata</span></div>


<div class="viewcode-block" id="NewClient.get_newsletter_message_update">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_newsletter_message_update">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_newsletter_message_update</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">since</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">after</span><span class="p">:</span> <span class="nb">int</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RepeatedCompositeFieldContainer</span><span class="p">[</span><span class="n">NewsletterMessage</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves a list of newsletter messages that have been updated since a given timestamp.</span>

<span class="sd">        :param jid: The JID (Jabber ID) of the user.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param count: The maximum number of messages to retrieve.</span>
<span class="sd">        :type count: int</span>
<span class="sd">        :param since: The timestamp (in milliseconds) to retrieve messages from.</span>
<span class="sd">        :type since: int</span>
<span class="sd">        :param after: The timestamp (in milliseconds) to retrieve messages after.</span>
<span class="sd">        :type after: int</span>

<span class="sd">        :return: A list of updated newsletter messages.</span>
<span class="sd">        :rtype: RepeatedCompositeFieldContainer[NewsletterMessage]</span>

<span class="sd">        :raises GetNewsletterMessageUpdateError: If there was an error retrieving the newsletter messages.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jidbyte</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetNewsletterMessageUpdateReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetNewsletterMessageUpdate</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jidbyte</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jidbyte</span><span class="p">),</span> <span class="n">count</span><span class="p">,</span> <span class="n">since</span><span class="p">,</span> <span class="n">after</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetNewsletterMessageUpdateError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">NewsletterMessage</span></div>


<div class="viewcode-block" id="NewClient.get_newsletter_messages">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_newsletter_messages">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_newsletter_messages</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">before</span><span class="p">:</span> <span class="n">MessageServerID</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RepeatedCompositeFieldContainer</span><span class="p">[</span><span class="n">NewsletterMessage</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves a list of newsletter messages for a given JID.</span>

<span class="sd">        :param jid: The JID (Jabber Identifier) of the user.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param count: The maximum number of messages to retrieve.</span>
<span class="sd">        :type count: int</span>
<span class="sd">        :param before: The ID of the message before which to retrieve messages.</span>
<span class="sd">        :type before: MessageServerID</span>
<span class="sd">        :return: A list of newsletter messages.</span>
<span class="sd">        :rtype: RepeatedCompositeFieldContaine[NewsletterMessage]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jidbyte</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetNewsletterMessageUpdateReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetNewsletterMessages</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jidbyte</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jidbyte</span><span class="p">),</span> <span class="n">count</span><span class="p">,</span> <span class="n">before</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetNewsletterMessagesError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">NewsletterMessage</span></div>


<div class="viewcode-block" id="NewClient.get_privacy_settings">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_privacy_settings">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_privacy_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PrivacySettings</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function retrieves the my privacy settings.</span>

<span class="sd">        :return: privacy settings</span>
<span class="sd">        :rtype: PrivacySettings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">PrivacySettings</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetPrivacySettings</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.get_profile_picture">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_profile_picture">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_profile_picture</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span>
        <span class="n">extra</span><span class="p">:</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetProfilePictureParams</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetProfilePictureParams</span><span class="p">(),</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProfilePictureInfo</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function is used to get the profile picture of a user.</span>

<span class="sd">        :param jid: The unique identifier of the user whose profile picture we want to retrieve.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param extra: Additional parameters, defaults to neonize_proto.GetProfilePictureParams()</span>
<span class="sd">        :type extra: neonize_proto.GetProfilePictureParams, optional</span>
<span class="sd">        :raises GetProfilePictureError: If there is an error while trying to get the profile picture.</span>
<span class="sd">        :return: The information about the profile picture.</span>
<span class="sd">        :rtype: ProfilePictureInfo</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid_bytes</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">extra_bytes</span> <span class="o">=</span> <span class="n">extra</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetProfilePictureReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetProfilePicture</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
                <span class="n">jid_bytes</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">jid_bytes</span><span class="p">),</span>
                <span class="n">extra_bytes</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">extra_bytes</span><span class="p">),</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetProfilePictureError</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Picture</span></div>


<div class="viewcode-block" id="NewClient.get_status_privacy">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_status_privacy">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_status_privacy</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RepeatedCompositeFieldContainer</span><span class="p">[</span><span class="n">StatusPrivacy</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the status privacy settings of the user.</span>

<span class="sd">        :raises GetStatusPrivacyError: If there is an error in getting the status privacy.</span>
<span class="sd">        :return: The status privacy settings of the user.</span>
<span class="sd">        :rtype: RepeatedCompositeFieldContainer[StatusPrivacy]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetStatusPrivacyReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetStatusPrivacy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetStatusPrivacyError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">StatusPrivacy</span></div>


<div class="viewcode-block" id="NewClient.get_sub_groups">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_sub_groups">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_sub_groups</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">community</span><span class="p">:</span> <span class="n">JID</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RepeatedCompositeFieldContainer</span><span class="p">[</span><span class="n">GroupLinkTarget</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the subgroups of a given community.</span>

<span class="sd">        :param community: The community for which to get the subgroups.</span>
<span class="sd">        :type community: JID</span>
<span class="sd">        :raises GetSubGroupsError: If there is an error while getting the subgroups.</span>
<span class="sd">        :return: The subgroups of the given community.</span>
<span class="sd">        :rtype: RepeatedCompositeFieldContainer[GroupLinkTarget]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jid</span> <span class="o">=</span> <span class="n">community</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetSubGroupsReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetSubGroups</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jid</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jid</span><span class="p">))</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetSubGroupsError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">GroupLinkTarget</span></div>


<div class="viewcode-block" id="NewClient.get_subscribed_newletters">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_subscribed_newletters">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_subscribed_newletters</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RepeatedCompositeFieldContainer</span><span class="p">[</span><span class="n">NewsletterMetadata</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function retrieves the newsletters the user has subscribed to.</span>

<span class="sd">        :raises GetSubscribedNewslettersError: If there is an error while fetching the subscribed newsletters</span>
<span class="sd">        :return: A container with the metadata of each subscribed newsletter</span>
<span class="sd">        :rtype: RepeatedCompositeFieldContainer[NewsletterMetadata]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetSubscribedNewslettersReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetSubscribedNewsletters</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetSubscribedNewslettersError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Newsletter</span></div>


<div class="viewcode-block" id="NewClient.get_user_devices">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_user_devices">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_user_devices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">jids</span><span class="p">:</span> <span class="n">JID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RepeatedCompositeFieldContainer</span><span class="p">[</span><span class="n">JID</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve devices associated with specified user JIDs.</span>

<span class="sd">        :param jids: Variable number of JIDs (Jabber Identifiers) of users.</span>
<span class="sd">        :type jids: JID</span>
<span class="sd">        :raises GetUserDevicesError: If there is an error retrieving user devices.</span>
<span class="sd">        :return: Devices associated with the specified user JIDs.</span>
<span class="sd">        :rtype: RepeatedCompositeFieldContainer[JID]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jids_</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">JIDArray</span><span class="p">(</span><span class="n">JIDS</span><span class="o">=</span><span class="n">jids</span><span class="p">)</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetUserDevicesreturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetUserDevices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jids_</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jids_</span><span class="p">))</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetUserDevicesError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">JID</span></div>


<div class="viewcode-block" id="NewClient.get_blocklist">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_blocklist">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_blocklist</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Blocklist</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves the blocklist from the client.</span>

<span class="sd">        :return: Blocklist: The retrieved blocklist.</span>
<span class="sd">        :raises GetBlocklistError: If there was an error retrieving the blocklist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetBlocklistReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetBlocklist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetBlocklistError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Blocklist</span></div>


<div class="viewcode-block" id="NewClient.get_me">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_me">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_me</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Device</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is used to get the device information associated with a given UUID.</span>

<span class="sd">        :return: It returns a Device object created from the byte string response from the client&#39;s GetMe method.</span>
<span class="sd">        :rtype: Device</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Device</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetMe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">())</span></div>


<div class="viewcode-block" id="NewClient.get_contact_qr_link">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_contact_qr_link">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_contact_qr_link</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">revoke</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function returns a QR link for a specific contact. If the &#39;revoke&#39; parameter is set to True,</span>
<span class="sd">        it revokes the existing QR link and generates a new one.</span>

<span class="sd">        :param revoke: If set to True, revokes the existing QR link and generates a new one. Defaults to False.</span>
<span class="sd">        :type revoke: bool, optional</span>
<span class="sd">        :raises GetContactQrLinkError: If there is an error in getting the QR link.</span>
<span class="sd">        :return: The QR link for the contact.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetContactQRLinkReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetContactQRLink</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">revoke</span><span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetContactQrLinkError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Link</span></div>


<div class="viewcode-block" id="NewClient.get_linked_group_participants">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_linked_group_participants">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_linked_group_participants</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">community</span><span class="p">:</span> <span class="n">JID</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RepeatedCompositeFieldContainer</span><span class="p">[</span><span class="n">JID</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fetches the participants of a linked group in a community.</span>

<span class="sd">        :param community: The community in which the linked group belongs.</span>
<span class="sd">        :type community: JID</span>
<span class="sd">        :raises GetLinkedGroupParticipantsError: If there is an error while fetching the participants.</span>
<span class="sd">        :return: A list of participants in the linked group.</span>
<span class="sd">        :rtype: RepeatedCompositeFieldContainer[JID]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jidbyte</span> <span class="o">=</span> <span class="n">community</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetGroupRequestParticipantsReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetLinkedGroupsParticipants</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jidbyte</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jidbyte</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetLinkedGroupParticipantsError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Participants</span></div>


<div class="viewcode-block" id="NewClient.get_newsletter_info">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_newsletter_info">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_newsletter_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">NewsletterMetadata</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetches the metadata of a specific newsletter using its JID.</span>

<span class="sd">        :param jid: The unique identifier of the newsletter</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :raises GetNewsletterInfoError: If there is an error while fetching the newsletter information</span>
<span class="sd">        :return: The metadata of the requested newsletter</span>
<span class="sd">        :rtype: neonize_proto.NewsletterMetadata</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">jidbyte</span> <span class="o">=</span> <span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">CreateNewsLetterReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetNewsletterInfo</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">jidbyte</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jidbyte</span><span class="p">)</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GetNewsletterInfoError</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Error</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">NewsletterMetadata</span></div>


<div class="viewcode-block" id="NewClient.PairPhone">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.PairPhone">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">PairPhone</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">phone</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">show_push_notification</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">client_name</span><span class="p">:</span> <span class="n">ClientName</span> <span class="o">=</span> <span class="n">ClientName</span><span class="o">.</span><span class="n">LINUX</span><span class="p">,</span>
        <span class="n">client_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ClientType</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pair a phone with the client. This function will try to connect to the WhatsApp servers and pair the phone.</span>
<span class="sd">        If successful, it will show a push notification on the paired phone.</span>

<span class="sd">        :param phone: The phone number to be paired.</span>
<span class="sd">        :type phone: str</span>
<span class="sd">        :param show_push_notification: If true, a push notification will be shown on the paired phone.</span>
<span class="sd">        :type show_push_notification: bool</span>
<span class="sd">        :param client_name: The name of the client, defaults to LINUX.</span>
<span class="sd">        :type client_name: ClientName, optional</span>
<span class="sd">        :param client_type: The type of the client, defaults to None. If None, it will be set to FIREFOX or determined by the device properties.</span>
<span class="sd">        :type client_type: Optional[ClientType], optional</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">client_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_props</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">client_type</span> <span class="o">=</span> <span class="n">ClientType</span><span class="o">.</span><span class="n">FIREFOX</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">client_type</span> <span class="o">=</span> <span class="n">ClientType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">device_props</span><span class="o">.</span><span class="n">platformType</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="n">client_type</span> <span class="o">=</span> <span class="n">ClientType</span><span class="o">.</span><span class="n">FIREFOX</span>

        <span class="n">pl</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">PairPhoneParams</span><span class="p">(</span>
            <span class="n">phone</span><span class="o">=</span><span class="n">phone</span><span class="p">,</span>
            <span class="n">clientDisplayName</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">client_type</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">client_name</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
            <span class="n">clientType</span><span class="o">=</span><span class="n">client_type</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="n">showPushNotification</span><span class="o">=</span><span class="n">show_push_notification</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">d</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">list_func</span><span class="p">))</span>

        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;trying connect to whatsapp servers&quot;</span><span class="p">)</span>

        <span class="n">deviceprops</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">DeviceProps</span><span class="p">(</span><span class="n">os</span><span class="o">=</span><span class="s2">&quot;Neonize&quot;</span><span class="p">,</span> <span class="n">platformType</span><span class="o">=</span><span class="n">DeviceProps</span><span class="o">.</span><span class="n">SAFARI</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_props</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_props</span>
        <span class="p">)</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>

        <span class="n">jidbuf_size</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">jidbuf</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jid</span><span class="p">:</span>
            <span class="n">jidbuf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
            <span class="n">jidbuf_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">jidbuf</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">Neonize</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
            <span class="n">jidbuf</span><span class="p">,</span>
            <span class="n">jidbuf_size</span><span class="p">,</span>
            <span class="n">LogLevel</span><span class="o">.</span><span class="n">from_logging</span><span class="p">(</span><span class="n">log</span><span class="o">.</span><span class="n">level</span><span class="p">)</span><span class="o">.</span><span class="n">level</span><span class="p">,</span>
            <span class="n">func_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__onQr</span><span class="p">),</span>
            <span class="n">func_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__onLoginStatus</span><span class="p">),</span>
            <span class="n">func_callback_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">execute</span><span class="p">),</span>
            <span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">list_func</span><span class="o">.</span><span class="fm">__len__</span><span class="p">())</span><span class="o">.</span><span class="n">from_buffer</span><span class="p">(</span><span class="n">d</span><span class="p">),</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">),</span>
            <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">blocking_func</span><span class="p">),</span>
            <span class="n">deviceprops</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">deviceprops</span><span class="p">),</span>
            <span class="n">payload</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">payload</span><span class="p">),</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.get_message_for_retry">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.get_message_for_retry">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_message_for_retry</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">requester</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">to</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span> <span class="n">message_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">Message</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function retrieves a specific message for retrying transmission.</span>
<span class="sd">        It communicates with a client to get the message using provided requester, recipient, and message ID.</span>

<span class="sd">        :param requester: The JID of the entity requesting the message.</span>
<span class="sd">        :type requester: JID</span>
<span class="sd">        :param to: The JID of the intended recipient of the message.</span>
<span class="sd">        :type to: JID</span>
<span class="sd">        :param message_id: The unique identifier of the message to be retrieved.</span>
<span class="sd">        :type message_id: str</span>
<span class="sd">        :return: The message to be retried if found, None otherwise.</span>
<span class="sd">        :rtype: Union[None, Message]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">requester_buf</span> <span class="o">=</span> <span class="n">requester</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">to_buf</span> <span class="o">=</span> <span class="n">to</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">neonize_proto</span><span class="o">.</span><span class="n">GetMessageForRetryReturnFunction</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">GetMessageForRetry</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
                <span class="n">requester_buf</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">requester_buf</span><span class="p">),</span>
                <span class="n">to_buf</span><span class="p">,</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">to_buf</span><span class="p">),</span>
                <span class="n">message_id</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
            <span class="p">)</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">model</span><span class="o">.</span><span class="n">isEmpty</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">model</span><span class="o">.</span><span class="n">Message</span></div>


<div class="viewcode-block" id="NewClient.send_fb_message">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.send_fb_message">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_fb_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">to</span><span class="p">:</span> <span class="n">JID</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="n">ConsumerApplication</span><span class="p">,</span>
        <span class="n">metadata</span><span class="p">:</span> <span class="n">MessageApplication</span><span class="o">.</span><span class="n">Metadata</span><span class="p">,</span>
        <span class="n">extra</span><span class="p">:</span> <span class="n">SendRequestExtra</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="n">to_buff</span> <span class="o">=</span> <span class="n">to</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">message_buff</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">metadata_buff</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">extra_buff</span> <span class="o">=</span> <span class="n">extra</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SendFBMessage</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
            <span class="n">to_buff</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">to_buff</span><span class="p">),</span>
            <span class="n">message_buff</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">message_buff</span><span class="p">),</span>
            <span class="n">metadata_buff</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">metadata_buff</span><span class="p">),</span>
            <span class="n">extra_buff</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">extra_buff</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">SendResponse</span><span class="o">.</span><span class="n">FromString</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">get_bytes</span><span class="p">())</span></div>


<div class="viewcode-block" id="NewClient.send_presence">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.send_presence">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">send_presence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">presence</span><span class="p">:</span> <span class="n">Presence</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">SendPresence</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span> <span class="n">presence</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SendPresenceError</span><span class="p">(</span><span class="n">response</span><span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.connect">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.connect">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Establishes a connection to the WhatsApp servers.&quot;&quot;&quot;</span>
        <span class="c1"># Convert the list of functions to a bytearray</span>
        <span class="n">d</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">list_func</span><span class="p">))</span>
        <span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot; Attempting to connect to the WhatsApp servers.&quot;</span><span class="p">)</span>
        <span class="c1"># Set device properties</span>
        <span class="n">deviceprops</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">DeviceProps</span><span class="p">(</span><span class="n">os</span><span class="o">=</span><span class="s2">&quot;Neonize&quot;</span><span class="p">,</span> <span class="n">platformType</span><span class="o">=</span><span class="n">DeviceProps</span><span class="o">.</span><span class="n">SAFARI</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_props</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">device_props</span>
        <span class="p">)</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>

        <span class="n">jidbuf_size</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">jidbuf</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">jid</span><span class="p">:</span>
            <span class="n">jidbuf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">jid</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
            <span class="n">jidbuf_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">jidbuf</span><span class="p">)</span>

        <span class="c1"># Initiate connection to the server</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">Neonize</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
            <span class="n">jidbuf</span><span class="p">,</span>
            <span class="n">jidbuf_size</span><span class="p">,</span>
            <span class="n">LogLevel</span><span class="o">.</span><span class="n">from_logging</span><span class="p">(</span><span class="n">log</span><span class="o">.</span><span class="n">level</span><span class="p">)</span><span class="o">.</span><span class="n">level</span><span class="p">,</span>
            <span class="n">func_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__onQr</span><span class="p">),</span>
            <span class="n">func_string</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__onLoginStatus</span><span class="p">),</span>
            <span class="n">func_callback_bytes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">execute</span><span class="p">),</span>
            <span class="p">(</span><span class="n">ctypes</span><span class="o">.</span><span class="n">c_char</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">list_func</span><span class="p">))</span><span class="o">.</span><span class="n">from_buffer</span><span class="p">(</span><span class="n">d</span><span class="p">),</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">),</span>
            <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">blocking_func</span><span class="p">),</span>
            <span class="n">deviceprops</span><span class="p">,</span>
            <span class="nb">len</span><span class="p">(</span><span class="n">deviceprops</span><span class="p">),</span>
            <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="NewClient.disconnect">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.NewClient.disconnect">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Disconnect the client</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__client</span><span class="o">.</span><span class="n">Disconnect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="ClientFactory">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ClientFactory">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ClientFactory</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">database_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;neonize.db&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This class is used to create new instances of the client.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">database_name</span> <span class="o">=</span> <span class="n">database_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">NewClient</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="o">=</span> <span class="n">EventsManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="ClientFactory.get_all_devices_from_db">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ClientFactory.get_all_devices_from_db">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_devices_from_db</span><span class="p">(</span><span class="n">db</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Device</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves all devices associated with the current account.</span>
<span class="sd">        :param db: The name of the database to retrieve the devices from.</span>
<span class="sd">        :return: A list of Device-like objects representing all associated devices.</span>
<span class="sd">        :rtype: List[neonize_proto.Device]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">c_string</span> <span class="o">=</span> <span class="n">gocode</span><span class="o">.</span><span class="n">GetAllDevices</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">c_string</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="n">devices</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Device</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">device_str</span> <span class="ow">in</span> <span class="n">c_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|</span><span class="se">\u0001</span><span class="s2">|&quot;</span><span class="p">):</span>
            <span class="nb">id</span><span class="p">,</span> <span class="n">push_name</span><span class="p">,</span> <span class="n">bussniess_name</span><span class="p">,</span> <span class="n">initialized</span> <span class="o">=</span> <span class="n">device_str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
            <span class="nb">id</span><span class="p">,</span> <span class="n">server</span> <span class="o">=</span> <span class="nb">id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)</span>
            <span class="n">jid</span> <span class="o">=</span> <span class="n">build_jid</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">server</span><span class="p">)</span>

            <span class="n">device</span> <span class="o">=</span> <span class="n">Device</span><span class="p">(</span>
                <span class="n">JID</span><span class="o">=</span><span class="n">jid</span><span class="p">,</span>
                <span class="n">PushName</span><span class="o">=</span><span class="n">push_name</span><span class="p">,</span>
                <span class="n">BussinessName</span><span class="o">=</span><span class="n">bussniess_name</span><span class="p">,</span>
                <span class="n">Initialized</span><span class="o">=</span><span class="n">initialized</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">devices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">devices</span></div>


<div class="viewcode-block" id="ClientFactory.get_all_devices">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ClientFactory.get_all_devices">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_devices</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Device&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves all devices associated with the current account from the database.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_devices_from_db</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">database_name</span><span class="p">)</span></div>


<div class="viewcode-block" id="ClientFactory.new_client">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ClientFactory.new_client">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">new_client</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">jid</span><span class="p">:</span> <span class="n">JID</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">uuid</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">props</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">DeviceProps</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NewClient</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function creates a new instance of the client. If the jid parameter is not provided, a new client will be created.</span>
<span class="sd">        :param name: The name of the client.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :param uuid: The unique identifier of the client.</span>
<span class="sd">        :type uuid: str</span>
<span class="sd">        :param jid: The JID of the client.</span>
<span class="sd">        :type jid: JID</span>
<span class="sd">        :param props: The device properties of the client.</span>
<span class="sd">        :type props: Optional[DeviceProps]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">jid</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">uuid</span><span class="p">:</span>
            <span class="c1"># you must at least provide a uuid to make sure the client is unique</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;JID and UUID cannot be none&quot;</span><span class="p">)</span>

        <span class="n">client</span> <span class="o">=</span> <span class="n">NewClient</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">database_name</span><span class="p">,</span> <span class="n">jid</span><span class="p">,</span> <span class="n">props</span><span class="p">,</span> <span class="n">uuid</span><span class="p">)</span>
        <span class="n">client</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">list_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">client</span></div>


<div class="viewcode-block" id="ClientFactory.run">
<a class="viewcode-back" href="../../source/neonize.html#neonize.client.ClientFactory.run">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">client</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
            <span class="n">Thread</span><span class="p">(</span>
                <span class="n">target</span><span class="o">=</span><span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">,</span>
                <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">client</span><span class="o">.</span><span class="n">uuid</span><span class="p">,</span>
            <span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="n">Event</span><span class="o">.</span><span class="n">default_blocking</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span></div>
</div>

</pre></div>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, krypton-byte
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=590429e0"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>